!function(){"use strict";function e(){"undefined"!=typeof globalThis&&void 0!==globalThis.document&&globalThis.document.querySelectorAll([".highlight pre",".language-liquid .highlight pre","pre.highlight",".language-javascript .highlight pre",".language-yaml .highlight pre",".language-markdown .highlight pre",".language-html .highlight pre",".language-css .highlight pre",".language-scss .highlight pre"].join(", ")).forEach(function(e){e.querySelector('code[class*="language-mermaid"], code.mermaid')||(e.scrollWidth>e.clientWidth||e.scrollHeight>e.clientHeight)&&(e.setAttribute("tabindex","0"),e.setAttribute("role","group"),e.setAttribute("aria-label","Scrollable code block"),e.addEventListener("keydown",function(t){switch(t.key){case"ArrowLeft":t.ctrlKey&&(e.scrollLeft-=50,t.preventDefault());break;case"ArrowRight":t.ctrlKey&&(e.scrollLeft+=50,t.preventDefault());break;case"ArrowUp":t.ctrlKey&&(e.scrollTop-=20,t.preventDefault());break;case"ArrowDown":t.ctrlKey&&(e.scrollTop+=20,t.preventDefault());break;case"Home":t.ctrlKey&&(e.scrollLeft=0,t.preventDefault());break;case"End":t.ctrlKey&&(e.scrollLeft=e.scrollWidth,t.preventDefault())}}))})}function t(){"undefined"!=typeof globalThis&&void 0!==globalThis.document&&void 0!==globalThis.window&&globalThis.document.querySelectorAll('a, button, input, select, textarea, [role="button"], [role="link"]').forEach(function(e){var t=e.getBoundingClientRect();if(t.width<44||t.height<44){e.style.minWidth="44px",e.style.minHeight="44px";var o=globalThis.window.getComputedStyle(e).padding;o&&"0px"!==o&&"0px 0px"!==o&&"0px 0px 0px 0px"!==o||(e.style.padding="8px")}})}function o(){var o;(null===(o=globalThis.document)||void 0===o?void 0:o.querySelectorAll("pre > code.language-mermaid, pre > code.mermaid").length)>0?setTimeout(function(){e(),t()},2e3):(e(),t())}if("undefined"!=typeof globalThis&&void 0!==globalThis.document&&("loading"===globalThis.document.readyState?globalThis.document.addEventListener("DOMContentLoaded",o):o()),"undefined"!=typeof globalThis&&void 0!==globalThis.window&&"MutationObserver"in globalThis.window){var n=new MutationObserver(function(e){var t=!1;e.forEach(function(e){"childList"===e.type&&e.addedNodes.length>0&&(t=!0)}),t&&setTimeout(o,100)});void 0!==globalThis.document&&n.observe(globalThis.document.body,{childList:!0,subtree:!0})}function i(e,t,o,n){return new(o||(o=Promise))(function(i,l){function a(e){try{c(n.next(e))}catch(t){l(t)}}function r(e){try{c(n.throw(e))}catch(t){l(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,r)}c((n=n.apply(e,t||[])).next())})}function l(e,t){var o,n,i,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=r(0),a.throw=r(1),a.return=r(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(r){return function(c){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;a&&(a=0,r[0]&&(l=0)),l;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return l.label++,{value:r[1],done:!1};case 5:l.label++,n=r[1],r=[0];continue;case 7:r=l.ops.pop(),l.trys.pop();continue;default:if(!((i=(i=l.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){l=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){l.label=r[1];break}if(6===r[0]&&l.label<i[1]){l.label=i[1],i=r;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(r);break}i[2]&&l.ops.pop(),l.trys.pop();continue}r=t.call(e,l)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}}"function"==typeof SuppressedError&&SuppressedError;var a=function(){function e(){this.copyButtonClass="copy-button",this.highlightSelector=".highlight, pre",this.containerSelector=".highlighter-rouge",this.copySuccessDelay=2e3,this.accessibilitySettings={copyButtonLabel:"Copy code to clipboard",copySuccessLabel:"Code copied to clipboard",copyFailLabel:"Copy failed - try again",srAnnounceDelay:50},this.init()}return e.prototype.init=function(){var e=this;"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){return e.setupCodeBlocks()}):this.setupCodeBlocks()},e.prototype.setupCodeBlocks=function(){var e=this,t=Array.from(document.querySelectorAll(this.highlightSelector)).filter(function(e){var t;if("pre"===(null===(t=e.tagName)||void 0===t?void 0:t.toLowerCase())){var o=!!e.querySelector("code"),n=/language-|lang-/.test(e.className),i=!!e.getAttribute("data-lang");return o||n||i}return!0});0!==t.length?(t.forEach(function(t){e.enhanceAccessibility(t),e.addCopyButton(t),e.addKeyboardNavigation(t)}),console.debug("MIJUG Code Highlighter: Enhanced ".concat(t.length," code blocks"))):console.debug("No code blocks found for highlighter setup")},e.prototype.enhanceAccessibility=function(e){if(e.hasAttribute("role")||e.setAttribute("role","img"),e.hasAttribute("tabindex")||e.setAttribute("tabindex","0"),!e.hasAttribute("aria-label")){var t=this.detectLanguage(e);e.setAttribute("aria-label","Code example in ".concat(t))}},e.prototype.detectLanguage=function(e){var t=e.getAttribute("data-lang");if(t)return t;var o=e.closest(this.containerSelector);if(o)for(var n=0,i=o.className.split(" ");n<i.length;n++){var l=i[n];if(l.startsWith("language-"))return l.replace("language-","")}return"code"},e.prototype.addCopyButton=function(e){var t=this,o=this.createCopyButton(),n=e.closest(this.containerSelector);null!=n||(n=e.parentElement),(null==n?void 0:n.classList.contains("wrapper"))&&(n=e),null!=n||(n=e),n.classList.contains("highlighter-rouge")||console.debug("MIJUG Code Highlighter: Using fallback container for copy button"),n instanceof HTMLElement&&"static"===getComputedStyle(n).position&&(n.style.position="relative"),n.querySelector(".".concat(this.copyButtonClass))||(n.appendChild(o),o.addEventListener("click",function(){return t.handleCopyClick(o,e)}),o.addEventListener("keydown",function(e){return t.handleCopyKeydown(e,o)}))},e.prototype.createCopyButton=function(){var e=document.createElement("button");return e.className=this.copyButtonClass,e.innerHTML='\n      <svg aria-hidden="true" focusable="false" viewBox="0 0 24 24" width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n        <path fill="currentColor" d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>\n      </svg>\n      <span class="copy-text">Copy</span>\n    ',e.setAttribute("aria-label",this.accessibilitySettings.copyButtonLabel),e.setAttribute("type","button"),e.setAttribute("tabindex","0"),e},e.prototype.handleCopyClick=function(e,t){return i(this,void 0,void 0,function(){var o,n,i,a;return l(this,function(l){switch(l.label){case 0:if(l.trys.push([0,2,,3]),!(null==(o=t.querySelector("code"))?void 0:o.textContent))throw new Error("No code content found to copy");if(n=o.textContent.trim(),!(null===(a=null===navigator||void 0===navigator?void 0:navigator.clipboard)||void 0===a?void 0:a.writeText))throw new Error("Clipboard API not supported in this browser");return[4,navigator.clipboard.writeText(n)];case 1:return l.sent(),this.showCopySuccess(e),this.announceToScreenReader("Code copied to clipboard"),[3,3];case 2:return i=l.sent(),console.error("MIJUG Code Highlighter: Copy failed:",i),this.showCopyError(e),this.fallbackCopy(t,e),[3,3];case 3:return[2]}})})},e.prototype.fallbackCopy=function(e,t){try{var o=e.querySelector("code");if(!(null==o?void 0:o.textContent))return;var n=document.createElement("textarea");n.value=o.textContent.trim(),n.style.position="fixed",n.style.opacity="0",n.style.pointerEvents="none",document.body.appendChild(n),n.select();var i=document.execCommand("copy");if(document.body.removeChild(n),!i)throw new Error("Fallback copy failed");this.showCopySuccess(t),this.announceToScreenReader("Code copied to clipboard")}catch(l){console.error("MIJUG Code Highlighter: Fallback copy failed:",l),this.showCopyError(t),this.announceToScreenReader("Copy failed, please try again")}},e.prototype.handleCopyKeydown=function(e,t){var o;if("Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t.click()),"Escape"===e.key){var n=null===(o=t.closest(this.containerSelector))||void 0===o?void 0:o.querySelector(this.highlightSelector);n&&n.focus()}},e.prototype.addKeyboardNavigation=function(e){var t=this;e.hasAttribute("tabindex")||e.setAttribute("tabindex","0"),e.addEventListener("keydown",function(o){var n,i,l;"Tab"!==o.key||o.shiftKey||(l=null===(n=e.parentElement)||void 0===n?void 0:n.querySelector(".".concat(t.copyButtonClass)))&&(o.preventDefault(),l.focus()),"Enter"!==o.key&&" "!==o.key||!o.ctrlKey||(o.preventDefault(),(l=null===(i=e.parentElement)||void 0===i?void 0:i.querySelector(".".concat(t.copyButtonClass)))&&l.click())})},e.prototype.showCopySuccess=function(e){var t,o=this,n=e.querySelector(".copy-text"),i=null!==(t=null==n?void 0:n.textContent)&&void 0!==t?t:"Copy",l=e.getAttribute("aria-label");n&&(n.textContent="Copied!"),e.setAttribute("aria-label",this.accessibilitySettings.copySuccessLabel),e.classList.add("copied"),setTimeout(function(){n&&(n.textContent=i),e.setAttribute("aria-label",null!=l?l:o.accessibilitySettings.copyButtonLabel),e.classList.remove("copied")},this.copySuccessDelay)},e.prototype.showCopyError=function(e){var t,o=this,n=e.querySelector(".copy-text"),i=null!==(t=null==n?void 0:n.textContent)&&void 0!==t?t:"Copy",l=e.getAttribute("aria-label");n&&(n.textContent="Failed"),e.setAttribute("aria-label",this.accessibilitySettings.copyFailLabel),e.classList.add("error"),setTimeout(function(){n&&(n.textContent=i),e.setAttribute("aria-label",null!=l?l:o.accessibilitySettings.copyButtonLabel),e.classList.remove("error")},this.copySuccessDelay)},e.prototype.announceToScreenReader=function(e){var t=document.getElementById("sr-announcer");t||((t=document.createElement("div")).id="sr-announcer",t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.classList.add("sr-only"),t.style.position="absolute",t.style.width="1px",t.style.height="1px",t.style.padding="0",t.style.margin="-1px",t.style.overflow="hidden",t.style.clip="rect(0, 0, 0, 0)",t.style.whiteSpace="nowrap",t.style.border="0",document.body.appendChild(t)),setTimeout(function(){t&&(t.textContent=e)},this.accessibilitySettings.srAnnounceDelay)},e}();new a;var r,c=null,s=null,d=null,u=null,h=null;function g(e){var t;"undefined"!=typeof globalThis&&(null===(t=globalThis.window)||void 0===t?void 0:t.requestIdleCallback)?globalThis.window.requestIdleCallback(e,{timeout:1e3}):"undefined"!=typeof setTimeout?setTimeout(e,16):e()}function p(){"undefined"!=typeof globalThis&&void 0!==globalThis.document&&(null!=c||(c=(new Date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})),g(function(){var e;null!=s||(s=function(){var e,t=globalThis.document.querySelector('meta[name="version"]');return null!==(e=null==t?void 0:t.content)&&void 0!==e?e:c}()),null!=d||(d=null!==(e=globalThis.document.title.split(" | ")[0])&&void 0!==e?e:globalThis.document.title),void 0!==globalThis.requestAnimationFrame&&globalThis.requestAnimationFrame(function(){globalThis.document.body.setAttribute("data-print-date",c),globalThis.document.body.setAttribute("data-version",s),globalThis.document.body.setAttribute("data-document-title",d),g(function(){return b(c,s)})})}))}function b(e,t){if("undefined"!=typeof globalThis&&void 0!==globalThis.document){var o=globalThis.document.getElementById("print-date-css");o&&o.remove();var n=globalThis.document.createElement("style");n.id="print-date-css",n.textContent='\n    @media print {\n      @page {\n        @bottom-center {\n          content: "Printed: '.concat(e," | Modified: ").concat(t,'";\n          font-size: 9pt;\n          color: #666;\n        }\n      }\n    }\n  ');var i=globalThis.document.createDocumentFragment();i.appendChild(n),globalThis.document.head.appendChild(i)}}function y(){"undefined"!=typeof globalThis&&void 0!==globalThis.window&&(u&&clearTimeout(u),u=globalThis.window.setTimeout(function(){var e=(new Date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});"undefined"!=typeof globalThis&&void 0!==globalThis.requestAnimationFrame&&void 0!==globalThis.document&&globalThis.requestAnimationFrame(function(){globalThis.document.body.setAttribute("data-print-date",e);var t=null!=s?s:e;g(function(){return b(e,t)})})},10))}"undefined"!=typeof globalThis&&void 0!==globalThis.document&&("loading"===globalThis.document.readyState?globalThis.document.addEventListener("DOMContentLoaded",p,{passive:!0}):g(p)),"undefined"!=typeof globalThis&&void 0!==globalThis.window&&globalThis.window.addEventListener("beforeprint",y,{passive:!0}),"undefined"!=typeof globalThis&&void 0!==globalThis.document&&globalThis.document.addEventListener("keydown",function(e){var t,o;(e.ctrlKey||e.metaKey)&&"p"===e.key&&(h&&clearTimeout(h),h=null!==(o=null===(t=globalThis.window)||void 0===t?void 0:t.setTimeout(y,10))&&void 0!==o?o:0)},{passive:!0});var f,v=null;function m(){return null!=v||(v="undefined"!=typeof globalThis&&void 0!==globalThis.document&&"function"==typeof globalThis.document.hasStorageAccess&&"function"==typeof globalThis.document.requestStorageAccess),v}function T(){return i(this,void 0,void 0,function(){var e,t,o,n,i;return l(this,function(l){switch(l.label){case 0:if(!m())return console.debug("Storage Access API not supported in this browser"),[2,!1];l.label=1;case 1:return l.trys.push([1,4,,5]),[4,null===(o=(t=globalThis.document).hasStorageAccess)||void 0===o?void 0:o.call(t)];case 2:return l.sent()?(console.debug("Storage access already granted"),[2,!0]):[4,null===(i=(n=globalThis.document).requestStorageAccess)||void 0===i?void 0:i.call(n)];case 3:return l.sent(),console.debug("Storage access granted"),[2,!0];case 4:return e=l.sent(),console.error("Storage access denied or failed:",e),[2,!1];case 5:return[2]}})})}function w(){"undefined"!=typeof globalThis&&void 0!==globalThis.document&&(function(){if("undefined"!=typeof globalThis&&void 0!==globalThis.document&&!globalThis.document.querySelector('meta[http-equiv="Permissions-Policy"]')){var e=globalThis.document.createElement("meta");e.httpEquiv="Permissions-Policy",e.content='storage-access=(self "https://calendar.google.com" "https://www.google.com")',globalThis.document.head.appendChild(e)}}(),"undefined"!=typeof globalThis&&void 0!==globalThis.document&&(globalThis.document.querySelectorAll('[src*="calendar.google.com"], [href*="calendar.google.com"]').forEach(function(e){e.addEventListener("click",function(){T().catch(function(e){console.error("Failed to request storage access:",e)})})}),globalThis.document.querySelectorAll('iframe[src*="calendar.google.com"]').forEach(function(e){e.addEventListener("load",function(){T().catch(function(e){console.error("Failed to request storage access for iframe:",e)})})})),new MutationObserver(function(e){e.forEach(function(e){e.addedNodes.forEach(function(e){if(e.nodeType===Node.ELEMENT_NODE){var t=e;(t.querySelectorAll?t.querySelectorAll('[src*="calendar.google.com"], [href*="calendar.google.com"]'):[]).forEach(function(e){e.addEventListener("click",function(){T().catch(function(e){console.error("Failed to request storage access for dynamic content:",e)})})})}})})}).observe(globalThis.document.body,{childList:!0,subtree:!0}))}"undefined"!=typeof globalThis&&void 0!==globalThis.document&&("loading"===globalThis.document.readyState?globalThis.document.addEventListener("DOMContentLoaded",w):w()),"undefined"!=typeof globalThis&&void 0!==globalThis.window&&(globalThis.window.MIJUG=null!==(r=globalThis.window.MIJUG)&&void 0!==r?r:{},globalThis.window.MIJUG.storageAccess={request:T,isSupported:m}),new a,"undefined"!=typeof globalThis&&(null===(f=globalThis.window)||void 0===f?void 0:f.MIJUG_DISABLE_PRINT)&&"undefined"!=typeof globalThis&&void 0!==globalThis.window&&(globalThis.window.print=function(){console.debug("Print functionality disabled")},globalThis.window.addEventListener("keydown",function(e){var t,o;if(80===e.keyCode&&(e.ctrlKey||e.metaKey)&&!e.altKey&&(!e.shiftKey||void 0!==(null===(t=globalThis.window)||void 0===t?void 0:t.chrome)||void 0!==(null===(o=globalThis.window)||void 0===o?void 0:o.opera)))return e.preventDefault(),void(e.stopImmediatePropagation?e.stopImmediatePropagation():e.stopPropagation());!e.ctrlKey||"p"!==e.key&&"s"!==e.key||e.preventDefault()},!0))}();
