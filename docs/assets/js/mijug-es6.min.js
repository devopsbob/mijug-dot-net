function e(){"undefined"!=typeof globalThis&&void 0!==globalThis.document&&globalThis.document.querySelectorAll([".highlight pre",".language-liquid .highlight pre","pre.highlight",".language-javascript .highlight pre",".language-yaml .highlight pre",".language-markdown .highlight pre",".language-html .highlight pre",".language-css .highlight pre",".language-scss .highlight pre"].join(", ")).forEach(e=>{(e.scrollWidth>e.clientWidth||e.scrollHeight>e.clientHeight)&&(e.setAttribute("tabindex","0"),e.setAttribute("role","group"),e.setAttribute("aria-label","Scrollable code block"),e.addEventListener("keydown",o=>{switch(o.key){case"ArrowLeft":o.ctrlKey&&(e.scrollLeft-=50,o.preventDefault());break;case"ArrowRight":o.ctrlKey&&(e.scrollLeft+=50,o.preventDefault());break;case"ArrowUp":o.ctrlKey&&(e.scrollTop-=20,o.preventDefault());break;case"ArrowDown":o.ctrlKey&&(e.scrollTop+=20,o.preventDefault());break;case"Home":o.ctrlKey&&(e.scrollLeft=0,o.preventDefault());break;case"End":o.ctrlKey&&(e.scrollLeft=e.scrollWidth,o.preventDefault())}}))}),"undefined"!=typeof globalThis&&void 0!==globalThis.document&&void 0!==globalThis.window&&globalThis.document.querySelectorAll('a, button, input, select, textarea, [role="button"], [role="link"]').forEach(e=>{const o=e.getBoundingClientRect();if(o.width<44||o.height<44){e.style.minWidth="44px",e.style.minHeight="44px";const o=globalThis.window.getComputedStyle(e).padding;o&&"0px"!==o&&"0px 0px"!==o&&"0px 0px 0px 0px"!==o||(e.style.padding="8px")}})}if("undefined"!=typeof globalThis&&void 0!==globalThis.document&&("loading"===globalThis.document.readyState?globalThis.document.addEventListener("DOMContentLoaded",e):e()),"undefined"!=typeof globalThis&&void 0!==globalThis.window&&"MutationObserver"in globalThis.window){const o=new MutationObserver(o=>{let t=!1;o.forEach(e=>{"childList"===e.type&&e.addedNodes.length>0&&(t=!0)}),t&&setTimeout(e,100)});void 0!==globalThis.document&&o.observe(globalThis.document.body,{childList:!0,subtree:!0})}let o=null,t=null,l=null,i=null,n=null;function a(e){"undefined"!=typeof globalThis&&globalThis.window?.requestIdleCallback?globalThis.window.requestIdleCallback(e,{timeout:1e3}):"undefined"!=typeof setTimeout?setTimeout(e,16):e()}function d(){"undefined"!=typeof globalThis&&void 0!==globalThis.document&&(o??=(new Date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),a(()=>{t??=(()=>{const e=globalThis.document.querySelector('meta[name="version"]');return e?.content??o})(),l??=globalThis.document.title.split(" | ")[0]??globalThis.document.title,void 0!==globalThis.requestAnimationFrame&&globalThis.requestAnimationFrame(()=>{globalThis.document.body.setAttribute("data-print-date",o),globalThis.document.body.setAttribute("data-version",t),globalThis.document.body.setAttribute("data-document-title",l),a(()=>s(o,t))})}))}function s(e,o){if("undefined"==typeof globalThis||void 0===globalThis.document)return;const t=globalThis.document.getElementById("print-date-css");t&&t.remove();const l=globalThis.document.createElement("style");l.id="print-date-css",l.textContent=`\n    @media print {\n      @page {\n        @bottom-center {\n          content: "Printed: ${e} | Modified: ${o}";\n          font-size: 9pt;\n          color: #666;\n        }\n      }\n    }\n  `;const i=globalThis.document.createDocumentFragment();i.appendChild(l),globalThis.document.head.appendChild(i)}function r(){"undefined"!=typeof globalThis&&void 0!==globalThis.window&&(i&&clearTimeout(i),i=globalThis.window.setTimeout(()=>{const e=(new Date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});"undefined"!=typeof globalThis&&void 0!==globalThis.requestAnimationFrame&&void 0!==globalThis.document&&globalThis.requestAnimationFrame(()=>{globalThis.document.body.setAttribute("data-print-date",e);const o=t??e;a(()=>s(e,o))})},10))}"undefined"!=typeof globalThis&&void 0!==globalThis.document&&("loading"===globalThis.document.readyState?globalThis.document.addEventListener("DOMContentLoaded",d,{passive:!0}):a(d)),"undefined"!=typeof globalThis&&void 0!==globalThis.window&&globalThis.window.addEventListener("beforeprint",r,{passive:!0}),"undefined"!=typeof globalThis&&void 0!==globalThis.document&&globalThis.document.addEventListener("keydown",function(e){(e.ctrlKey||e.metaKey)&&"p"===e.key&&(n&&clearTimeout(n),n=globalThis.window?.setTimeout(r,10)??0)},{passive:!0});let c=null;function g(){return c??="undefined"!=typeof globalThis&&void 0!==globalThis.document&&"function"==typeof globalThis.document.hasStorageAccess&&"function"==typeof globalThis.document.requestStorageAccess,c}async function u(){if(!g())return console.debug("Storage Access API not supported in this browser"),!1;try{return await(globalThis.document.hasStorageAccess?.())?(console.debug("Storage access already granted"),!0):(await(globalThis.document.requestStorageAccess?.()),console.debug("Storage access granted"),!0)}catch(e){return console.error("Storage access denied or failed:",e),!1}}function h(){"undefined"!=typeof globalThis&&void 0!==globalThis.document&&(!function(){if("undefined"!=typeof globalThis&&void 0!==globalThis.document&&!globalThis.document.querySelector('meta[http-equiv="Permissions-Policy"]')){const e=globalThis.document.createElement("meta");e.httpEquiv="Permissions-Policy",e.content='storage-access=(self "https://calendar.google.com" "https://www.google.com")',globalThis.document.head.appendChild(e)}}(),"undefined"!=typeof globalThis&&void 0!==globalThis.document&&(globalThis.document.querySelectorAll('[src*="calendar.google.com"], [href*="calendar.google.com"]').forEach(e=>{e.addEventListener("click",()=>{u().catch(e=>{console.error("Failed to request storage access:",e)})})}),globalThis.document.querySelectorAll('iframe[src*="calendar.google.com"]').forEach(e=>{e.addEventListener("load",()=>{u().catch(e=>{console.error("Failed to request storage access for iframe:",e)})})})),new MutationObserver(e=>{e.forEach(e=>{e.addedNodes.forEach(e=>{if(e.nodeType===Node.ELEMENT_NODE){const o=e;(o.querySelectorAll?o.querySelectorAll('[src*="calendar.google.com"], [href*="calendar.google.com"]'):[]).forEach(e=>{e.addEventListener("click",()=>{u().catch(e=>{console.error("Failed to request storage access for dynamic content:",e)})})})}})})}).observe(globalThis.document.body,{childList:!0,subtree:!0}))}function b(){"undefined"!=typeof globalThis&&globalThis.window?.MIJUG_DISABLE_PRINT&&"undefined"!=typeof globalThis&&void 0!==globalThis.window&&(globalThis.window.print=function(){console.debug("Print functionality disabled")},globalThis.window.addEventListener("keydown",function(e){if(80===e.keyCode&&(e.ctrlKey||e.metaKey)&&!e.altKey&&(!e.shiftKey||void 0!==globalThis.window?.chrome||void 0!==globalThis.window?.opera))return e.preventDefault(),void(e.stopImmediatePropagation?e.stopImmediatePropagation():e.stopPropagation());!e.ctrlKey||"p"!==e.key&&"s"!==e.key||e.preventDefault()},!0))}"undefined"!=typeof globalThis&&void 0!==globalThis.document&&("loading"===globalThis.document.readyState?globalThis.document.addEventListener("DOMContentLoaded",h):h()),"undefined"!=typeof globalThis&&void 0!==globalThis.window&&(globalThis.window.MIJUG=globalThis.window.MIJUG??{},globalThis.window.MIJUG.storageAccess={request:u,isSupported:g}),b();export{b as maybeDisablePrint};
