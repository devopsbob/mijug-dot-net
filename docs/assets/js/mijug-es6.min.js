function e(){document.querySelectorAll([".highlight pre",".language-liquid .highlight pre","pre.highlight",".language-javascript .highlight pre",".language-yaml .highlight pre",".language-markdown .highlight pre",".language-html .highlight pre",".language-css .highlight pre",".language-scss .highlight pre"].join(", ")).forEach(e=>{(e.scrollWidth>e.clientWidth||e.scrollHeight>e.clientHeight)&&(e.setAttribute("tabindex","0"),e.setAttribute("role","group"),e.setAttribute("aria-label","Scrollable code block"),e.addEventListener("keydown",t=>{switch(t.key){case"ArrowLeft":t.ctrlKey&&(e.scrollLeft-=50,t.preventDefault());break;case"ArrowRight":t.ctrlKey&&(e.scrollLeft+=50,t.preventDefault());break;case"ArrowUp":t.ctrlKey&&(e.scrollTop-=20,t.preventDefault());break;case"ArrowDown":t.ctrlKey&&(e.scrollTop+=20,t.preventDefault());break;case"Home":t.ctrlKey&&(e.scrollLeft=0,t.preventDefault());break;case"End":t.ctrlKey&&(e.scrollLeft=e.scrollWidth,t.preventDefault())}}))}),document.querySelectorAll('a, button, input, select, textarea, [role="button"], [role="link"]').forEach(e=>{const t=e.getBoundingClientRect();(t.width<44||t.height<44)&&(e.style.minWidth="44px",e.style.minHeight="44px",e.style.padding||(e.style.padding="8px"))})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e(),"MutationObserver"in window&&new MutationObserver(t=>{let o=!1;t.forEach(e=>{"childList"===e.type&&e.addedNodes.length>0&&(o=!0)}),o&&setTimeout(e,100)}).observe(document.body,{childList:!0,subtree:!0});let t=null,o=null,n=null,r=null,c=null;function a(e){window.requestIdleCallback?window.requestIdleCallback(e,{timeout:1e3}):setTimeout(e,16)}function i(){if(!t){const e=new Date;t=e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}a(()=>{if(!o){const e=document.querySelector('meta[name="version"]');o=e?e.content:t}n||(n=document.title.split(" | ")[0]||document.title),requestAnimationFrame(()=>{document.body.setAttribute("data-print-date",t),document.body.setAttribute("data-version",o),document.body.setAttribute("data-document-title",n),a(()=>l(t,o))})})}function l(e,t){const o=document.getElementById("print-date-css");o&&o.remove();const n=document.createElement("style");n.id="print-date-css",n.textContent=`\n    @media print {\n      @page {\n        @bottom-center {\n          content: "Printed: ${e} | Modified: ${t}";\n          font-size: 9pt;\n          color: #666;\n        }\n      }\n    }\n  `;const r=document.createDocumentFragment();r.appendChild(n),document.head.appendChild(r)}function d(){r&&clearTimeout(r),r=window.setTimeout(()=>{const e=(new Date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});requestAnimationFrame(()=>{document.body.setAttribute("data-print-date",e);const t=o||e;a(()=>l(e,t))})},10)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",i,{passive:!0}):a(i),window.addEventListener("beforeprint",d,{passive:!0}),document.addEventListener("keydown",function(e){(e.ctrlKey||e.metaKey)&&"p"===e.key&&(c&&clearTimeout(c),c=window.setTimeout(d,10))},{passive:!0});let s=null;function u(){return null===s&&(s="function"==typeof document.hasStorageAccess&&"function"==typeof document.requestStorageAccess),s}async function g(){if(!u())return console.log("Storage Access API not supported in this browser"),!1;try{return await(document.hasStorageAccess?.())?(console.log("Storage access already granted"),!0):(await(document.requestStorageAccess?.()),console.log("Storage access granted"),!0)}catch(e){return console.log("Storage access denied or failed:",e),!1}}function m(){!function(){if(!document.querySelector('meta[http-equiv="Permissions-Policy"]')){const e=document.createElement("meta");e.httpEquiv="Permissions-Policy",e.content='storage-access=(self "https://calendar.google.com" "https://www.google.com")',document.head.appendChild(e)}}(),document.querySelectorAll('[src*="calendar.google.com"], [href*="calendar.google.com"]').forEach(e=>{e.addEventListener("click",()=>{g().catch(e=>{console.error("Failed to request storage access:",e)})})}),document.querySelectorAll('iframe[src*="calendar.google.com"]').forEach(e=>{e.addEventListener("load",()=>{g().catch(e=>{console.error("Failed to request storage access for iframe:",e)})})}),new MutationObserver(e=>{e.forEach(e=>{e.addedNodes.forEach(e=>{if(e.nodeType===Node.ELEMENT_NODE){const t=e;(t.querySelectorAll?t.querySelectorAll('[src*="calendar.google.com"], [href*="calendar.google.com"]'):[]).forEach(e=>{e.addEventListener("click",()=>{g().catch(e=>{console.error("Failed to request storage access for dynamic content:",e)})})})}})})}).observe(document.body,{childList:!0,subtree:!0})}function h(){window.MIJUG_DISABLE_PRINT&&(window.print=function(){console.log("Skip printing")},window.addEventListener("keydown",function(e){if(80===e.keyCode&&(e.ctrlKey||e.metaKey)&&!e.altKey&&(!e.shiftKey||void 0!==window.chrome||void 0!==window.opera))return e.preventDefault(),void(e.stopImmediatePropagation?e.stopImmediatePropagation():e.stopPropagation());!e.ctrlKey||"p"!==e.key&&"s"!==e.key||e.preventDefault()},!0))}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",m):m(),window.MIJUG=window.MIJUG||{},window.MIJUG.storageAccess={request:g,isSupported:u},h();export{h as maybeDisablePrint};
