function e(){"undefined"!=typeof globalThis&&void 0!==globalThis.document&&globalThis.document.querySelectorAll([".highlight pre",".language-liquid .highlight pre","pre.highlight",".language-javascript .highlight pre",".language-yaml .highlight pre",".language-markdown .highlight pre",".language-html .highlight pre",".language-css .highlight pre",".language-scss .highlight pre"].join(", ")).forEach(e=>{e.querySelector('code[class*="language-mermaid"], code.mermaid')||(e.scrollWidth>e.clientWidth||e.scrollHeight>e.clientHeight)&&(e.setAttribute("tabindex","0"),e.setAttribute("role","group"),e.setAttribute("aria-label","Scrollable code block"),e.addEventListener("keydown",o=>{switch(o.key){case"ArrowLeft":o.ctrlKey&&(e.scrollLeft-=50,o.preventDefault());break;case"ArrowRight":o.ctrlKey&&(e.scrollLeft+=50,o.preventDefault());break;case"ArrowUp":o.ctrlKey&&(e.scrollTop-=20,o.preventDefault());break;case"ArrowDown":o.ctrlKey&&(e.scrollTop+=20,o.preventDefault());break;case"Home":o.ctrlKey&&(e.scrollLeft=0,o.preventDefault());break;case"End":o.ctrlKey&&(e.scrollLeft=e.scrollWidth,o.preventDefault())}}))})}function o(){"undefined"!=typeof globalThis&&void 0!==globalThis.document&&void 0!==globalThis.window&&globalThis.document.querySelectorAll('a, button, input, select, textarea, [role="button"], [role="link"]').forEach(e=>{const o=e.getBoundingClientRect();if(o.width<44||o.height<44){e.style.minWidth="44px",e.style.minHeight="44px";const o=globalThis.window.getComputedStyle(e).padding;o&&"0px"!==o&&"0px 0px"!==o&&"0px 0px 0px 0px"!==o||(e.style.padding="8px")}})}function t(){globalThis.document?.querySelectorAll("pre > code.language-mermaid, pre > code.mermaid").length>0?setTimeout(()=>{e(),o()},2e3):(e(),o())}if("undefined"!=typeof globalThis&&void 0!==globalThis.document&&("loading"===globalThis.document.readyState?globalThis.document.addEventListener("DOMContentLoaded",t):t()),"undefined"!=typeof globalThis&&void 0!==globalThis.window&&"MutationObserver"in globalThis.window){const e=new MutationObserver(e=>{let o=!1;e.forEach(e=>{"childList"===e.type&&e.addedNodes.length>0&&(o=!0)}),o&&setTimeout(t,100)});void 0!==globalThis.document&&e.observe(globalThis.document.body,{childList:!0,subtree:!0})}let l=null,i=null,n=null,a=null,d=null;function s(e){"undefined"!=typeof globalThis&&globalThis.window?.requestIdleCallback?globalThis.window.requestIdleCallback(e,{timeout:1e3}):"undefined"!=typeof setTimeout?setTimeout(e,16):e()}function r(){"undefined"!=typeof globalThis&&void 0!==globalThis.document&&(l??=(new Date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),s(()=>{i??=(()=>{const e=globalThis.document.querySelector('meta[name="version"]');return e?.content??l})(),n??=globalThis.document.title.split(" | ")[0]??globalThis.document.title,void 0!==globalThis.requestAnimationFrame&&globalThis.requestAnimationFrame(()=>{globalThis.document.body.setAttribute("data-print-date",l),globalThis.document.body.setAttribute("data-version",i),globalThis.document.body.setAttribute("data-document-title",n),s(()=>c(l,i))})}))}function c(e,o){if("undefined"==typeof globalThis||void 0===globalThis.document)return;const t=globalThis.document.getElementById("print-date-css");t&&t.remove();const l=globalThis.document.createElement("style");l.id="print-date-css",l.textContent=`\n    @media print {\n      @page {\n        @bottom-center {\n          content: "Printed: ${e} | Modified: ${o}";\n          font-size: 9pt;\n          color: #666;\n        }\n      }\n    }\n  `;const i=globalThis.document.createDocumentFragment();i.appendChild(l),globalThis.document.head.appendChild(i)}function g(){"undefined"!=typeof globalThis&&void 0!==globalThis.window&&(a&&clearTimeout(a),a=globalThis.window.setTimeout(()=>{const e=(new Date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});"undefined"!=typeof globalThis&&void 0!==globalThis.requestAnimationFrame&&void 0!==globalThis.document&&globalThis.requestAnimationFrame(()=>{globalThis.document.body.setAttribute("data-print-date",e);const o=i??e;s(()=>c(e,o))})},10))}"undefined"!=typeof globalThis&&void 0!==globalThis.document&&("loading"===globalThis.document.readyState?globalThis.document.addEventListener("DOMContentLoaded",r,{passive:!0}):s(r)),"undefined"!=typeof globalThis&&void 0!==globalThis.window&&globalThis.window.addEventListener("beforeprint",g,{passive:!0}),"undefined"!=typeof globalThis&&void 0!==globalThis.document&&globalThis.document.addEventListener("keydown",function(e){(e.ctrlKey||e.metaKey)&&"p"===e.key&&(d&&clearTimeout(d),d=globalThis.window?.setTimeout(g,10)??0)},{passive:!0});let u=null;function h(){return u??="undefined"!=typeof globalThis&&void 0!==globalThis.document&&"function"==typeof globalThis.document.hasStorageAccess&&"function"==typeof globalThis.document.requestStorageAccess,u}async function b(){if(!h())return console.debug("Storage Access API not supported in this browser"),!1;try{return await(globalThis.document.hasStorageAccess?.())?(console.debug("Storage access already granted"),!0):(await(globalThis.document.requestStorageAccess?.()),console.debug("Storage access granted"),!0)}catch(e){return console.error("Storage access denied or failed:",e),!1}}function m(){"undefined"!=typeof globalThis&&void 0!==globalThis.document&&(!function(){if("undefined"!=typeof globalThis&&void 0!==globalThis.document&&!globalThis.document.querySelector('meta[http-equiv="Permissions-Policy"]')){const e=globalThis.document.createElement("meta");e.httpEquiv="Permissions-Policy",e.content='storage-access=(self "https://calendar.google.com" "https://www.google.com")',globalThis.document.head.appendChild(e)}}(),"undefined"!=typeof globalThis&&void 0!==globalThis.document&&(globalThis.document.querySelectorAll('[src*="calendar.google.com"], [href*="calendar.google.com"]').forEach(e=>{e.addEventListener("click",()=>{b().catch(e=>{console.error("Failed to request storage access:",e)})})}),globalThis.document.querySelectorAll('iframe[src*="calendar.google.com"]').forEach(e=>{e.addEventListener("load",()=>{b().catch(e=>{console.error("Failed to request storage access for iframe:",e)})})})),new MutationObserver(e=>{e.forEach(e=>{e.addedNodes.forEach(e=>{if(e.nodeType===Node.ELEMENT_NODE){const o=e;(o.querySelectorAll?o.querySelectorAll('[src*="calendar.google.com"], [href*="calendar.google.com"]'):[]).forEach(e=>{e.addEventListener("click",()=>{b().catch(e=>{console.error("Failed to request storage access for dynamic content:",e)})})})}})})}).observe(globalThis.document.body,{childList:!0,subtree:!0}))}function T(){"undefined"!=typeof globalThis&&globalThis.window?.MIJUG_DISABLE_PRINT&&"undefined"!=typeof globalThis&&void 0!==globalThis.window&&(globalThis.window.print=function(){console.debug("Print functionality disabled")},globalThis.window.addEventListener("keydown",function(e){if(80===e.keyCode&&(e.ctrlKey||e.metaKey)&&!e.altKey&&(!e.shiftKey||void 0!==globalThis.window?.chrome||void 0!==globalThis.window?.opera))return e.preventDefault(),void(e.stopImmediatePropagation?e.stopImmediatePropagation():e.stopPropagation());!e.ctrlKey||"p"!==e.key&&"s"!==e.key||e.preventDefault()},!0))}"undefined"!=typeof globalThis&&void 0!==globalThis.document&&("loading"===globalThis.document.readyState?globalThis.document.addEventListener("DOMContentLoaded",m):m()),"undefined"!=typeof globalThis&&void 0!==globalThis.window&&(globalThis.window.MIJUG=globalThis.window.MIJUG??{},globalThis.window.MIJUG.storageAccess={request:b,isSupported:h}),T();export{T as maybeDisablePrint};
