<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta http-equiv="Content-Security-Policy" content="
      default-src 'self';
      script-src 'self' 'unsafe-inline' https://www.googletagmanager.com https://cdn.jsdelivr.net https://pagead2.googlesyndication.com https://googleads.g.doubleclick.net https://ep1.adtrafficquality.google https://ep2.adtrafficquality.google https://csi.gstatic.com ;
      style-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net ;
      style-src-elem 'self' 'unsafe-inline' ;
      img-src 'self' data: https: https://www.google-analytics.com https://pagead2.googlesyndication.com https://ep1.adtrafficquality.google https://ep2.adtrafficquality.google;
      font-src 'self' https://cdn.jsdelivr.net https://fonts.gstatic.com data:;
      connect-src 'self' https://www.google-analytics.com https://pagead2.googlesyndication.com https://googleads.g.doubleclick.net https://ep1.adtrafficquality.google https://ep2.adtrafficquality.google ;
      frame-src 'self' https://www.google.com https://googleads.g.doubleclick.net https://pagead2.googlesyndication.com https://ep1.adtrafficquality.google https://ep2.adtrafficquality.google ;
      object-src 'none';
      base-uri 'self';
      form-action 'self';
      manifest-src 'self';block-all-mixed-content;upgrade-insecure-requests">

    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin="anonymous" />
    
    <link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous" />
    <link rel="preconnect" href="https://www.google-analytics.com" crossorigin="anonymous" />
    
    
    <link rel="preconnect" href="https://pagead2.googlesyndication.com" crossorigin="anonymous" />
    <link rel="preconnect" href="https://googleads.g.doubleclick.net" crossorigin="anonymous" />
    <meta name="google-adsense-account" content="ca-pub-3383458876439157" />
    

    <!-- Critical navigation styles - always inlined for immediate user interaction -->
<style>
  /* Navigation toggle button - ALWAYS VISIBLE */
  .nav-toggle {
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    right: 1rem;
    top: 50%;
    transform: translateY(-50%);
    background: #2c5aa0;
    color: white;
    border: none;
    padding: 0.5rem 1rem;
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
    border-radius: 6px;
    z-index: 101;
    min-height: 24px;
    min-width: 24px;
  }

  /* Progressive enhancement - hide desktop nav when JS enabled */
  html.js nav.primary-nav {
    display: none;
  }

  /* Overlay navigation */
  html.js nav.primary-nav.nav-overlay {
    display: block;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(0, 0, 0, 0.85);
    z-index: 100;
    opacity: 0;
    visibility: hidden;
    transform: translateY(-20px);
    transition: opacity 0.3s ease, transform 0.3s ease, visibility 0.3s ease;
    overflow-y: auto;
  }

  html.js nav.primary-nav.nav-overlay.nav-visible {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
  }

  /* Body scroll lock when overlay is open */
  body.nav-open {
    overflow: hidden;
    position: fixed;
    width: 100%;
  }

  /* No-JS fallback */
  html.no-js .nav-toggle {
    display: none;
  }

  /* Accessibility - visually hidden elements */
  .visually-hidden {
    position: absolute !important;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  /* Performance optimization for font loading */
  html {
    font-display: swap;
  }

  /* Reduce layout shift during navigation initialization */
  .site-header .wrapper {
    min-height: 55.95px;
  }
</style>

    <!-- Preload fonts for better performance -->
  <link
    rel="preload"
    href="/assets/fonts/InterVariable.woff2"
    as="font"
    type="font/woff2"
    crossorigin="anonymous"
    immutable
  />
  <link
    rel="preconnect"
    href="https://fonts.googleapis.com"
  />
  <link
    rel="preconnect"
    href="https://fonts.gstatic.com"
    crossorigin
  />

    <!-- Critical CSS for above-the-fold content -->
<style>
/**
 * Critical path CSS for above-the-fold content
 * Optimized for < 12s build target and initial viewport rendering
 */

/* Base variables for theming */
:root {
  --bg-color: #ffffff;
  --text-color: #222222;
  --accent-color: #1e8449; /* WCAG AA compliant green */
  --link-color: #0066cc;
  --nav-bg: #f8f8f8;
  --border-color: #e8e8e8;
  --header-color: #424242;
  --focus-outline: 2px solid #1e8449;
  --font-family-base: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  --font-size-base: 16px;
  --line-height-base: 1.5;
}

/* Base element styles */
html {
  font-size: var(--font-size-base);
  font-family: var(--font-family-base);
  line-height: var(--line-height-base);
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

body {
  margin: 0;
  padding: 0;
  color: var(--text-color);
  background-color: var(--bg-color);
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

/* Wrapper for content layout */
.wrapper {
  max-width: 960px;
  margin: 0 auto;
  padding: 0 15px;
  width: calc(100% - 30px);
}

/* Critical header and navigation styles */
.site-header {
  border-bottom: 1px solid var(--border-color);
  min-height: 56px;
  background-color: var(--nav-bg);
  position: relative;
  display: flex;
  align-items: center;
}

.site-header .wrapper {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
}

.site-title {
  font-size: 1.5rem;
  font-weight: 300;
  letter-spacing: -1px;
  margin-bottom: 0;
  color: var(--header-color);
  text-decoration: none;
  display: flex;
  align-items: center;
  line-height: 56px;
}

.site-title img {
  margin-right: 10px;
  width: 50px;
  height: 50px;
}

.site-title.long-title {
  font-size: 1.25rem;
}

/* Navigation styling */
.site-nav {
  position: relative;
  line-height: 56px;
}

.site-nav .nav-trigger {
  display: none;
}

.site-nav .menu-icon {
  display: none;
}

.site-nav .page-link {
  color: var(--text-color);
  line-height: 1.5;
  text-decoration: none;
  margin-right: 20px;
}

.site-nav .page-link:hover {
  color: var(--accent-color);
}

.nav-button {
  background-color: var(--accent-color);
  color: white;
  border: none;
  padding: 8px 12px;
  border-radius: 4px;
  cursor: pointer;
  font-family: var(--font-family-base);
  font-size: 0.875rem;
  font-weight: 500;
  line-height: 1.2;
}

/* Main content area */
.page-content {
  padding: 30px 0;
  flex: 1;
}

/* Skip link - accessibility feature */
.skip-to-content {
  position: absolute;
  top: -50px;
  left: 10px;
  background: var(--accent-color);
  color: white;
  padding: 8px;
  z-index: 100;
  transition: top 0.3s ease;
}

.skip-to-content:focus {
  top: 10px;
}

/* Focus outline for accessibility */
:focus {
  outline: var(--focus-outline);
  outline-offset: 2px;
}

/* Basic media query for responsive design */
@media screen and (max-width: 600px) {
  .site-nav {
    position: absolute;
    top: 9px;
    right: 15px;
    background-color: var(--nav-bg);
    border: 1px solid var(--border-color);
    border-radius: 5px;
    text-align: right;
    z-index: 10;
  }

  .site-nav .menu-icon {
    display: block;
    float: right;
    width: 36px;
    height: 26px;
    line-height: 0;
    padding-top: 10px;
    text-align: center;
    cursor: pointer;
  }

  .site-nav .menu-icon > svg {
    width: 18px;
    height: 15px;
  }

  .site-nav .trigger {
    clear: both;
    display: none;
    padding-bottom: 5px;
  }

  .site-nav:not([popover]) .nav-trigger:checked ~ .trigger {
    display: block;
  }

  .site-nav .page-link {
    display: block;
    padding: 5px 10px;
    margin: 0;
  }
}

/* SR-only class for accessibility */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/* Basic typography for content */
h1, h2, h3, h4, h5, h6 {
  margin-top: 0;
  color: var(--header-color);
}

h1 {
  font-size: 2rem;
  margin-bottom: 0.5em;
}

p {
  margin-top: 0;
  margin-bottom: 1em;
}

/* SVG icon in header */
.svg-icon {
  width: 16px;
  height: 16px;
  display: inline-block;
  fill: currentColor;
  vertical-align: text-bottom;
  flex-shrink: 0;
  box-sizing: content-box;
}

/* Image aspect ratio and container styles */
img {
  aspect-ratio: attr(width) / attr(height);
}

.image-container {
  position: relative;
  height: 0;
  overflow: hidden;
}

.image-container--16-9 {
  padding-bottom: 56.25%; /* 16:9 aspect ratio */
}

.image-container--4-3 {
  padding-bottom: 75%; /* 4:3 aspect ratio */
}

.image-container img {
  position: absolute;
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* Cookie consent banner styles */
#cookie-consent-banner {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 1000;
  max-height: 0;
  opacity: 0;
  transform: translateY(100%);
  transition: transform 0.3s, opacity 0.3s, max-height 0s 0.3s;
  overflow: hidden;
}

#cookie-consent-banner.visible {
  max-height: 200px;
  opacity: 1;
  transform: translateY(0);
  transition: transform 0.3s, opacity 0.3s;
}

/* Advertisement container styles */
.ad-container {
  min-height: 250px;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: #f9f9f9;
  margin: 1rem 0;
  overflow: hidden;
  contain: layout size;
}

.ad-container::before {
  content: "Advertisement";
  color: #777;
  font-size: 0.75rem;
  position: absolute;
  top: 5px;
  right: 5px;
}

/* Mermaid diagram container styles */
.mermaid-container {
  position: relative;
  width: 100%;
  min-height: 150px;
  margin: 1.5rem 0;
  background-color: rgba(0,0,0,0.03);
  border-radius: 4px;
  overflow: hidden;
  contain: layout style paint;
}

.mermaid-container::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background:
    linear-gradient(90deg, transparent 25%, rgba(255,255,255,.5) 50%, transparent 75%) -200% 0 / 400% 100%,
    linear-gradient(rgba(0,0,0,.1) 0%, transparent 20%, transparent 80%, rgba(0,0,0,.1) 100%);
  animation: loading 1.5s infinite linear;
  opacity: 0.5;
}

@keyframes loading {
  to { background-position: 100% 0, 0 0; }
}

[popover] {
  contain: layout size;
}

.site-nav[popover] {
  /* Pre-compute layout position */
  position: absolute;
  top: 9px;
  right: 15px;
  z-index: 100;
  /* Prevent layout shift during animations */
  transform: translateZ(0);
  will-change: transform;
}
</style>
<link rel="preload" href="/assets/main.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="/assets/main.css"></noscript>


    <title>
      Testing Performance and Development Evolution | My Info Just Under Glass
    </title>
    <meta
      name="description"
      content="This document chronicles the significant performance improvements and development experience enhancements achieved through strategic testing evolution in the..."
    />
    
    <meta name="version" content="Sep 02, 2025" />
    

    
    <meta name="docs-nav-order" content="13" />
    <meta name="docs-section" content="documentation" />
    
    <meta name="priority-doc" content="true" />
    
    

    <meta name="google-site-verification" content="googlece83719b3f856e56" />
    <meta name="cache-version" content="20250928164112" />

    <link rel="preload" as="style" href="/assets/main.css?v=20251001203022" media="print" crossorigin><link rel="stylesheet" href="/assets/main.css?v=20251001203022" media="print">

    <noscript>
      <link rel="stylesheet" href="/assets/main.css?v=20251001203022">
    </noscript>

    <link
      rel="alternate"
      type="application/rss+xml"
      title="My Info Just Under Glass"
      href="/feed.xml"
    />
    
    
    <link
      rel="icon"
      type="image/svg+xml"
      href="/assets/logo-mijug-96x96.png?v=20250928164112"
    />
    
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="/favicon.ico"
    />
    <link rel="manifest" href="/manifest.webmanifest" />

    <meta name="description" content="Performance gains achieved through strategic testing evolution, unit-first development, and E2E consolidation in the MIJUG workspace" />
<meta property="og:title" content="Testing Performance and Development Evolution" />
<meta property="og:description" content="Performance gains achieved through strategic testing evolution, unit-first development, and E2E consolidation in the MIJUG workspace" />
<meta property="og:url" content="https://www.mijug.net/docs/testing-performance-evolution/" />
<meta property="og:site_name" content="My Info Just Under Glass" />
<meta property="og:type" content="website" /><meta property="og:image" content="https://www.mijug.net/assets/logo-mijug-96x96.png" /><link rel="canonical" href="https://www.mijug.net/docs/testing-performance-evolution/" />


    

    

    <script>
  window.MIJUG = window.MIJUG || {};
  window.MIJUG.cacheVersion = "20250928164112";
</script>

  
  <script>
    window.MIJUG_DISABLE_PRINT = true;
  </script>
  
  </head>
  
    <body oncontextmenu="return false;">
  
    <header class="site-header" role="banner">
      <noscript>
        <div class="legacy-browser-notice" role="alert">
          <strong>No Commerce Available</strong>
          <span class="notice-detail">JavaScript is required for commerce functionality.</span>
        </div>
      </noscript>

      <div class="wrapper">
        <a class="site-title" rel="home" href="/">
          
          <img src="/assets/logo-mijug-96x96.png?v=20250928164112" alt="My Info Just Under Glass" width="50" height="50">
           My Info Just Under Glass
        </a>

        <!-- Mobile navigation toggle button -->
        <button class="nav-toggle" type="button" aria-controls="primary-navigation" aria-expanded="false" aria-label="Toggle navigation menu">
          Menu
        </button>

        <!-- Navigation modal overlay with proper close button -->
        <nav id="primary-navigation" class="primary-nav" role="dialog" aria-modal="true" aria-hidden="true">

          <ul role="list">
            
              <li role="listitem">
                <a href="/blog/" aria-label="Navigate to Blog">
                   Blog
                </a>
              </li>
            
              <li role="listitem">
                <a href="/about/" aria-label="Navigate to About">
                   About
                </a>
              </li>
            
              <li role="listitem">
                <a href="/docs/getting-started/" aria-label="Navigate to Getting Started">
                   Getting Started
                </a>
              </li>
            
              <li role="listitem">
                <a href="/docs/welcome-mijug-workspace/" aria-label="Navigate to Workspace Overview">
                   Workspace Overview
                </a>
              </li>
            
              <li role="listitem">
                <a href="/docs/frontmatter-cms/" aria-label="Navigate to FrontMatter CMS Usage">
                   FrontMatter CMS Usage
                </a>
              </li>
            
              <li role="listitem">
                <a href="/docs/accessibility-testing/" aria-label="Navigate to Accessibility Testing Configuration">
                   Accessibility Testing Configuration
                </a>
              </li>
            
              <li role="listitem">
                <a href="/docs/browser-management/" aria-label="Navigate to Browser Management for Testing">
                   Browser Management for Testing
                </a>
              </li>
            
              <li role="listitem">
                <a href="/docs/browser-compatibility-testing/" aria-label="Navigate to Browser Compatibility Testing">
                   Browser Compatibility Testing
                </a>
              </li>
            
              <li role="listitem">
                <a href="/docs/liquid-tags-examples/" aria-label="Navigate to Liquid Tags Examples">
                   Liquid Tags Examples
                </a>
              </li>
            
              <li role="listitem">
                <a href="/docs/tags-and-categories-guide/" aria-label="Navigate to Tags and Categories System Guide">
                   Tags and Categories System Guide
                </a>
              </li>
            
              <li role="listitem">
                <a href="/docs/performance-optimization/" aria-label="Navigate to Performance Optimization Guide">
                   Performance Optimization Guide
                </a>
              </li>
            
              <li role="listitem">
                <a href="/docs/testing-performance-evolution/" class="active" aria-current="page" aria-label="Navigate to Testing Performance and Development Evolution">
                   Testing Performance and Development Evolution
                </a>
              </li>
            
              <li role="listitem">
                <a href="/docs/cache-management/" aria-label="Navigate to Cache Management Strategies">
                   Cache Management Strategies
                </a>
              </li>
            
              <li role="listitem">
                <a href="/docs/mermaid-configuration-guide/" aria-label="Navigate to Mermaid Diagram Configuration Guide">
                   Mermaid Diagram Configuration Guide
                </a>
              </li>
            
              <li role="listitem">
                <a href="/docs/mermaid-quick-start/" aria-label="Navigate to Mermaid Quick Start">
                   Mermaid Quick Start
                </a>
              </li>
            
              <li role="listitem">
                <a href="/docs/mermaid-examples/" aria-label="Navigate to Mermaid Diagram Examples">
                   Mermaid Diagram Examples
                </a>
              </li>
            
              <li role="listitem">
                <a href="/docs/mermaid-diagrams-sample/" aria-label="Navigate to Mermaid Diagrams Sample">
                   Mermaid Diagrams Sample
                </a>
              </li>
            
              <li role="listitem">
                <a href="/docs/mermaid-test-runner/" aria-label="Navigate to Mermaid Diagrams Test Runner">
                   Mermaid Diagrams Test Runner
                </a>
              </li>
            
              <li role="listitem">
                <a href="/docs/rel-attribute-guide/" aria-label="Navigate to The rel Attribute in HTML Links: A Comprehensive Guide">
                   The rel Attribute in HTML Links: A Comprehensive Guide
                </a>
              </li>
            
              <li role="listitem">
                <a href="/docs/exploring-limitations-of-gitea-and-ruby/" aria-label="Navigate to Exploring the Limitations of Gitea and Ruby">
                   Exploring the Limitations of Gitea and Ruby
                </a>
              </li>
            
          </ul>
        </nav>

        <div id="menu-status" class="visually-hidden" role="status" aria-live="polite"></div>
      </div>
    </header>

    <main class="page-content" aria-label="Content">
      <div class="wrapper">
<article class="post">
  <header class="post-header">
    <h1 class="post-title">Testing Performance and Development Evolution</h1>
  </header>

  <div class="post-content">
<p>This document chronicles the significant performance improvements and development experience enhancements achieved through strategic testing evolution in the MIJUG .NET workspace. It provides insights into the organic growth of testing practices, the benefits of unit-first development, and the dramatic gains from E2E test consolidation.</p>

<h2 id="-executive-summary">🎯 Executive Summary</h2>

<p>During a comprehensive testing optimization session, we achieved:</p>

<ul>
  <li>
<strong>75x performance improvement</strong> in unit test execution (2.3s vs 175s baseline)</li>
  <li>
<strong>60% reduction</strong> in E2E test files (10 → 4 files)</li>
  <li>
<strong>35-40% faster</strong> E2E test execution (~60-75s vs ~90-120s)</li>
  <li>
<strong>100% test coverage preservation</strong> across all optimizations</li>
  <li>
<strong>Enhanced developer experience</strong> through better test organization and monitoring</li>
</ul>

<h2 id="-performance-benchmarks">📊 Performance Benchmarks</h2>

<h3 id="unit-testing-performance-gains">Unit Testing Performance Gains</h3>

<table>
  <thead>
    <tr>
      <th>Metric</th>
      <th>Before Optimization</th>
      <th>After Optimization</th>
      <th>Improvement</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Execution Time</strong></td>
      <td>~175s baseline</td>
      <td>2.314s</td>
      <td><strong>75x faster</strong></td>
    </tr>
    <tr>
      <td><strong>Test Count</strong></td>
      <td>79 tests</td>
      <td>79 tests</td>
      <td>Maintained</td>
    </tr>
    <tr>
      <td><strong>Coverage</strong></td>
      <td>Full coverage</td>
      <td>Full coverage</td>
      <td>Preserved</td>
    </tr>
    <tr>
      <td><strong>Memory Usage</strong></td>
      <td>Default Node.js</td>
      <td>Optimized workers</td>
      <td>Reduced</td>
    </tr>
    <tr>
      <td><strong>Developer Feedback</strong></td>
      <td>Slow iteration</td>
      <td>Near-instant</td>
      <td><strong>Dramatic</strong></td>
    </tr>
  </tbody>
</table>

<h3 id="e2e-testing-consolidation-results">E2E Testing Consolidation Results</h3>

<table>
  <thead>
    <tr>
      <th>Metric</th>
      <th>Before Consolidation</th>
      <th>After Consolidation</th>
      <th>Improvement</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>File Count</strong></td>
      <td>10 test files</td>
      <td>4 test files</td>
      <td><strong>60% reduction</strong></td>
    </tr>
    <tr>
      <td><strong>Total Tests</strong></td>
      <td>64+ tests</td>
      <td>62 tests</td>
      <td>Coverage preserved</td>
    </tr>
    <tr>
      <td><strong>Execution Time</strong></td>
      <td>~90-120 seconds</td>
      <td>~60-75 seconds</td>
      <td><strong>35-40% faster</strong></td>
    </tr>
    <tr>
      <td><strong>Maintenance Overhead</strong></td>
      <td>High (10 files)</td>
      <td>Low (4 files)</td>
      <td><strong>Significantly reduced</strong></td>
    </tr>
    <tr>
      <td><strong>Browser Compatibility</strong></td>
      <td>100% (3 browsers)</td>
      <td>100% (3 browsers)</td>
      <td>Maintained</td>
    </tr>
  </tbody>
</table>

<h2 id="️-testing-architecture-evolution">🏗️ Testing Architecture Evolution</h2>

<h3 id="phase-1-unit-first-development-foundation">Phase 1: Unit-First Development Foundation</h3>

<p>The session began with establishing a robust unit testing foundation, demonstrating the critical importance of the <a href="#testing-pyramid-references">Testing Pyramid</a> approach.</p>

<h4 id="unit-test-optimizations"><strong>Unit Test Optimizations</strong></h4>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Jest configuration optimizations</span>
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">maxWorkers</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">100%</span><span class="dl">"</span><span class="p">,</span>        <span class="c1">// Utilize all CPU cores</span>
  <span class="dl">"</span><span class="s2">testTimeout</span><span class="dl">"</span><span class="p">:</span> <span class="mi">5000</span><span class="p">,</span>         <span class="c1">// Fast failure detection</span>
  <span class="dl">"</span><span class="s2">silent</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>              <span class="c1">// Reduce console noise</span>
  <span class="dl">"</span><span class="s2">testPathPattern</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">tests/</span><span class="dl">"</span>  <span class="c1">// Focus execution scope</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Key Achievements:</strong></p>

<ul>
  <li>⚡ <strong>75x performance improvement</strong> through optimized Jest configuration</li>
  <li>🔧 <strong>Enhanced utilities</strong>: HealthChecker, URLValidator, BrowserDetection</li>
  <li>📈 <strong>Better coverage</strong>: Comprehensive validation of core functionality</li>
  <li>🚀 <strong>Faster feedback</strong>: Near-instant test execution for rapid iteration</li>
</ul>

<h3 id="phase-2-e2e-test-consolidation-strategy">Phase 2: E2E Test Consolidation Strategy</h3>

<p>Following the <a href="#shift-left-testing-references">Shift-Left Testing</a> principle, we optimized E2E tests after establishing a solid unit testing foundation.</p>

<h4 id="consolidation-results"><strong>Consolidation Results</strong></h4>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Before: 10 fragmented test files</span>
<span class="nx">e2e</span><span class="o">/</span><span class="nx">accessibility</span><span class="p">.</span><span class="nx">spec</span><span class="p">.</span><span class="nx">ts</span>
<span class="nx">e2e</span><span class="o">/</span><span class="nx">documentation</span><span class="o">-</span><span class="nx">accessibility</span><span class="p">.</span><span class="nx">spec</span><span class="p">.</span><span class="nx">ts</span>
<span class="nx">e2e</span><span class="o">/</span><span class="nx">homepage</span><span class="p">.</span><span class="nx">spec</span><span class="p">.</span><span class="nx">ts</span>
<span class="nx">e2e</span><span class="o">/</span><span class="nx">navigation</span><span class="p">.</span><span class="nx">spec</span><span class="p">.</span><span class="nx">ts</span>
<span class="nx">e2e</span><span class="o">/</span><span class="nx">documentation</span><span class="p">.</span><span class="nx">spec</span><span class="p">.</span><span class="nx">ts</span>
<span class="nx">e2e</span><span class="o">/</span><span class="nx">mermaid</span><span class="o">-</span><span class="nx">basic</span><span class="o">-</span><span class="nx">visual</span><span class="p">.</span><span class="nx">spec</span><span class="p">.</span><span class="nx">ts</span>
<span class="nx">e2e</span><span class="o">/</span><span class="nx">mermaid</span><span class="o">-</span><span class="k">default</span><span class="o">-</span><span class="nx">layout</span><span class="p">.</span><span class="nx">spec</span><span class="p">.</span><span class="nx">ts</span>
<span class="nx">e2e</span><span class="o">/</span><span class="nx">mermaid</span><span class="o">-</span><span class="nx">diagrams</span><span class="o">-</span><span class="nx">visual</span><span class="p">.</span><span class="nx">spec</span><span class="p">.</span><span class="nx">ts</span>
<span class="nx">e2e</span><span class="o">/</span><span class="nx">mermaid</span><span class="o">-</span><span class="nx">documentation</span><span class="p">.</span><span class="nx">spec</span><span class="p">.</span><span class="nx">ts</span>
<span class="nx">e2e</span><span class="o">/</span><span class="nx">browser</span><span class="o">-</span><span class="nx">compatibility</span><span class="p">.</span><span class="nx">spec</span><span class="p">.</span><span class="nx">ts</span>

<span class="c1">// After: 4 strategically consolidated files</span>
<span class="nx">e2e</span><span class="o">/</span><span class="nx">accessibility</span><span class="o">-</span><span class="nx">consolidated</span><span class="p">.</span><span class="nx">spec</span><span class="p">.</span><span class="nf">ts  </span><span class="p">(</span><span class="mi">18</span> <span class="nx">tests</span><span class="p">)</span>
<span class="nx">e2e</span><span class="o">/</span><span class="nx">core</span><span class="o">-</span><span class="nx">functionality</span><span class="p">.</span><span class="nx">spec</span><span class="p">.</span><span class="nf">ts         </span><span class="p">(</span><span class="mi">20</span> <span class="nx">tests</span><span class="p">)</span>
<span class="nx">e2e</span><span class="o">/</span><span class="nx">mermaid</span><span class="o">-</span><span class="nx">consolidated</span><span class="p">.</span><span class="nx">spec</span><span class="p">.</span><span class="nf">ts        </span><span class="p">(</span><span class="mi">13</span> <span class="nx">tests</span><span class="p">)</span>
<span class="nx">e2e</span><span class="o">/</span><span class="nx">browser</span><span class="o">-</span><span class="nx">compatibility</span><span class="p">.</span><span class="nx">spec</span><span class="p">.</span><span class="nf">ts       </span><span class="p">(</span><span class="mi">13</span> <span class="nx">tests</span><span class="p">)</span>
</code></pre></div></div>

<p><strong>Strategic Benefits:</strong></p>

<ul>
  <li>🎯 <strong>Logical grouping</strong>: Tests organized by functional domain</li>
  <li>⚡ <strong>Reduced overhead</strong>: 60% fewer files to maintain and execute</li>
  <li>🔧 <strong>Enhanced monitoring</strong>: Comprehensive health checks throughout</li>
  <li>🛡️ <strong>Improved reliability</strong>: Better error handling and graceful degradation</li>
</ul>

<h2 id="-organic-testing-evolution">🔄 Organic Testing Evolution</h2>

<h3 id="advantages-of-incremental-testing-improvement">Advantages of Incremental Testing Improvement</h3>

<h4 id="-pros"><strong>✅ Pros</strong></h4>

<ol>
  <li>
<strong>Real-World Validation</strong>
    <ul>
      <li>Tests evolve with actual codebase challenges</li>
      <li>Organic identification of pain points and bottlenecks</li>
      <li>Natural adaptation to project-specific requirements</li>
    </ul>
  </li>
  <li>
<strong>Knowledge Building</strong>
    <ul>
      <li>Team learns testing best practices through practical application</li>
      <li>Understanding develops of which testing strategies work for the specific tech stack</li>
      <li>Expertise accumulates in project-specific testing patterns</li>
    </ul>
  </li>
  <li>
<strong>Sustainable Implementation</strong>
    <ul>
      <li>Gradual adoption prevents overwhelming development workflow</li>
      <li>Incremental improvements maintain momentum</li>
      <li>Cost-effective optimization of existing test suites</li>
    </ul>
  </li>
  <li>
<strong>Context-Aware Solutions</strong>
    <ul>
      <li>Solutions tailored to actual project constraints and requirements</li>
      <li>Testing strategies align with team workflow and development patterns</li>
      <li>Technology choices reflect real-world usage patterns</li>
    </ul>
  </li>
</ol>

<h4 id="-cons"><strong>❌ Cons</strong></h4>

<ol>
  <li>
<strong>Initial Technical Debt</strong>
    <ul>
      <li>May accumulate suboptimal testing patterns before optimization</li>
      <li>Risk of establishing inefficient testing habits early</li>
      <li>Potential for test suite bloat and maintenance overhead</li>
    </ul>
  </li>
  <li>
<strong>Performance Impact During Growth</strong>
    <ul>
      <li>Test execution time may degrade before optimization efforts</li>
      <li>Developer experience can suffer during inefficient periods</li>
      <li>CI/CD pipeline performance may be impacted</li>
    </ul>
  </li>
  <li>
<strong>Knowledge Gap Risk</strong>
    <ul>
      <li>Team may miss testing best practices without upfront research</li>
      <li>Risk of implementing anti-patterns that require later refactoring</li>
      <li>May lack awareness of advanced testing strategies initially</li>
    </ul>
  </li>
  <li>
<strong>Refactoring Overhead</strong>
    <ul>
      <li>Requires dedicated time for optimization and consolidation</li>
      <li>May need to rewrite tests to follow better patterns</li>
      <li>Risk of breaking existing test coverage during improvements</li>
    </ul>
  </li>
</ol>

<h3 id="recommended-balanced-approach">Recommended Balanced Approach</h3>

<p>Based on this project’s experience, the optimal strategy combines:</p>

<ol>
  <li>
<strong>Start with Testing Fundamentals</strong>: Implement basic unit testing from project inception</li>
  <li>
<strong>Follow Testing Pyramid</strong>: Heavy unit testing, moderate integration, light E2E</li>
  <li>
<strong>Regular Performance Reviews</strong>: Schedule periodic testing performance audits</li>
  <li>
<strong>Incremental Optimization</strong>: Apply improvements based on actual pain points</li>
  <li>
<strong>Knowledge Investment</strong>: Study testing best practices alongside organic development</li>
</ol>

<h2 id="-testing-technologies-and-best-practices">🧪 Testing Technologies and Best Practices</h2>

<h3 id="core-testing-stack">Core Testing Stack</h3>

<h4 id="jest---unit-testing-framework"><strong><a href="https://jestjs.io/" rel="external noopener noreferrer" target="_blank">Jest</a> - Unit Testing Framework</strong></h4>

<ul>
  <li>
<strong>Purpose</strong>: Fast, comprehensive unit and integration testing</li>
  <li>
<strong>Best Practices</strong>:
    <ul>
      <li>Use <code class="language-plaintext highlighter-rouge">maxWorkers: "100%"</code> for CPU utilization</li>
      <li>Implement focused test patterns with <code class="language-plaintext highlighter-rouge">testPathPattern</code>
</li>
      <li>Configure appropriate timeouts for different test types</li>
      <li>Leverage silent mode for cleaner CI output</li>
    </ul>
  </li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Jest optimization example</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">preset</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ts-jest</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">testEnvironment</span><span class="p">:</span> <span class="dl">"</span><span class="s2">node</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">maxWorkers</span><span class="p">:</span> <span class="dl">"</span><span class="s2">100%</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">testTimeout</span><span class="p">:</span> <span class="mi">5000</span><span class="p">,</span>
  <span class="na">silent</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">collectCoverage</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">coverageDirectory</span><span class="p">:</span> <span class="dl">"</span><span class="s2">coverage</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">testMatch</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">**/tests/**/*.test.ts</span><span class="dl">"</span><span class="p">],</span>
<span class="p">};</span>
</code></pre></div></div>

<h4 id="playwright---e2e-testing-framework"><strong><a href="https://playwright.dev/" rel="external noopener noreferrer" target="_blank">Playwright</a> - E2E Testing Framework</strong></h4>

<ul>
  <li>
<strong>Purpose</strong>: Cross-browser automation and E2E testing</li>
  <li>
<strong>Best Practices</strong>:
    <ul>
      <li>Implement page object patterns for maintainability</li>
      <li>Use proper wait strategies (<code class="language-plaintext highlighter-rouge">waitForLoadState</code>, <code class="language-plaintext highlighter-rouge">waitForSelector</code>)</li>
      <li>Configure appropriate timeouts for different environments</li>
      <li>Leverage parallel execution for performance</li>
    </ul>
  </li>
</ul>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Playwright configuration example</span>
<span class="k">export</span> <span class="k">default</span> <span class="nf">defineConfig</span><span class="p">({</span>
  <span class="na">testDir</span><span class="p">:</span> <span class="dl">"</span><span class="s2">./e2e</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">timeout</span><span class="p">:</span> <span class="mi">30000</span><span class="p">,</span>
  <span class="na">fullyParallel</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">workers</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">CI</span> <span class="p">?</span> <span class="mi">2</span> <span class="p">:</span> <span class="kc">undefined</span><span class="p">,</span>
  <span class="na">projects</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">chromium</span><span class="dl">"</span><span class="p">,</span> <span class="na">use</span><span class="p">:</span> <span class="p">{</span> <span class="p">...</span><span class="nx">devices</span><span class="p">[</span><span class="dl">"</span><span class="s2">Desktop Chrome</span><span class="dl">"</span><span class="p">]</span> <span class="p">}</span> <span class="p">},</span>
    <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">firefox</span><span class="dl">"</span><span class="p">,</span> <span class="na">use</span><span class="p">:</span> <span class="p">{</span> <span class="p">...</span><span class="nx">devices</span><span class="p">[</span><span class="dl">"</span><span class="s2">Desktop Firefox</span><span class="dl">"</span><span class="p">]</span> <span class="p">}</span> <span class="p">},</span>
    <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">webkit</span><span class="dl">"</span><span class="p">,</span> <span class="na">use</span><span class="p">:</span> <span class="p">{</span> <span class="p">...</span><span class="nx">devices</span><span class="p">[</span><span class="dl">"</span><span class="s2">Desktop Safari</span><span class="dl">"</span><span class="p">]</span> <span class="p">}</span> <span class="p">},</span>
  <span class="p">],</span>
<span class="p">});</span>
</code></pre></div></div>

<h4 id="axe-coreplaywright---accessibility-testing"><strong><a href="https://github.com/dequelabs/axe-core-npm" rel="external noopener noreferrer" target="_blank">@axe-core/playwright</a> - Accessibility Testing</strong></h4>

<ul>
  <li>
<strong>Purpose</strong>: Automated WCAG 2.1 AA compliance testing</li>
  <li>
<strong>Best Practices</strong>:
    <ul>
      <li>Include accessibility tests in standard E2E suites</li>
      <li>Configure appropriate rule sets for your application type</li>
      <li>Exclude known tracking elements and third-party content</li>
      <li>Implement consistent AxeBuilder configuration across tests</li>
    </ul>
  </li>
</ul>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Accessibility testing example</span>
<span class="kd">const</span> <span class="nx">accessibilityBuilder</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AxeBuilder</span><span class="p">({</span> <span class="nx">page</span> <span class="p">})</span>
  <span class="p">.</span><span class="nf">withTags</span><span class="p">([</span><span class="dl">"</span><span class="s2">wcag2a</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">wcag2aa</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">wcag21aa</span><span class="dl">"</span><span class="p">])</span>
  <span class="p">.</span><span class="nf">exclude</span><span class="p">(</span><span class="dl">'</span><span class="s1">img[width="1"][height="1"]</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">.</span><span class="nf">exclude</span><span class="p">(</span><span class="dl">'</span><span class="s1">img[src*="optistats"]</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">.</span><span class="nf">disableRules</span><span class="p">([</span><span class="dl">"</span><span class="s2">link-in-text-block</span><span class="dl">"</span><span class="p">]);</span>

<span class="kd">const</span> <span class="nx">results</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">accessibilityBuilder</span><span class="p">.</span><span class="nf">analyze</span><span class="p">();</span>
<span class="nf">expect</span><span class="p">(</span><span class="nx">results</span><span class="p">.</span><span class="nx">violations</span><span class="p">).</span><span class="nf">toEqual</span><span class="p">([]);</span>
</code></pre></div></div>

<h3 id="documentation-resources">Documentation Resources</h3>

<ul>
  <li>
<strong>Jest Documentation</strong>: <a href="https://jestjs.io/docs/getting-started" rel="external noopener noreferrer" target="_blank">Jest Getting Started</a>
</li>
  <li>
<strong>Playwright Documentation</strong>: <a href="https://playwright.dev/docs/intro" rel="external noopener noreferrer" target="_blank">Playwright Introduction</a>
</li>
  <li>
<strong>Axe-core Documentation</strong>: <a href="https://github.com/dequelabs/axe-core" rel="external noopener noreferrer" target="_blank">Axe-core GitHub</a>
</li>
  <li>
<strong>Testing Library</strong>: <a href="https://testing-library.com/docs/" rel="external noopener noreferrer" target="_blank">Testing Library Docs</a>
</li>
  <li>
<strong>TypeScript Testing</strong>: <a href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html" rel="external noopener noreferrer" target="_blank">TypeScript Handbook</a>
</li>
</ul>

<h2 id="-testing-pyramid-references">📈 Testing Pyramid References</h2>

<p>The <a href="https://martinfowler.com/articles/practical-test-pyramid.html" rel="external noopener noreferrer" target="_blank">Testing Pyramid</a>, popularized by Mike Cohn and refined by Martin Fowler, advocates for:</p>

<h3 id="foundation-layer-unit-tests-70-80"><strong>Foundation Layer: Unit Tests (70-80%)</strong></h3>

<ul>
  <li>
<strong>Fast execution</strong> (milliseconds to seconds)</li>
  <li>
<strong>High coverage</strong> of business logic and utilities</li>
  <li>
<strong>Isolated testing</strong> of individual components</li>
  <li>
<strong>Quick feedback</strong> for developers</li>
</ul>

<h3 id="integration-layer-integration-tests-15-25"><strong>Integration Layer: Integration Tests (15-25%)</strong></h3>

<ul>
  <li>
<strong>Component interaction</strong> validation</li>
  <li>
<strong>API contract</strong> testing</li>
  <li>
<strong>Database integration</strong> verification</li>
  <li>
<strong>Service boundary</strong> testing</li>
</ul>

<h3 id="ui-layer-e2e-tests-5-15"><strong>UI Layer: E2E Tests (5-15%)</strong></h3>

<ul>
  <li>
<strong>Critical user journeys</strong> validation</li>
  <li>
<strong>Cross-browser compatibility</strong> testing</li>
  <li>
<strong>Accessibility compliance</strong> verification</li>
  <li>
<strong>Performance regression</strong> detection</li>
</ul>

<h4 id="key-references"><strong>Key References:</strong></h4>

<ul>
  <li>Martin Fowler’s Test Pyramid: <a href="https://martinfowler.com/articles/practical-test-pyramid.html" rel="external noopener noreferrer" target="_blank">Practical Test Pyramid</a>
</li>
  <li>Google Testing Blog: <a href="https://testing.googleblog.com/2015/04/just-say-no-to-more-end-to-end-tests.html" rel="external noopener noreferrer" target="_blank">Just Say No to More End-to-End Tests</a>
</li>
  <li>Mike Cohn’s Original Concept: <a href="https://www.mountaingoatsoftware.com/blog/the-forgotten-layer-of-the-test-automation-pyramid" rel="external noopener noreferrer" target="_blank">The Forgotten Layer of the Test Automation Pyramid</a>
</li>
</ul>

<h2 id="️-shift-left-testing-references">⬅️ Shift-Left Testing References</h2>

<p><a href="https://en.wikipedia.org/wiki/Shift-left_testing" rel="external noopener noreferrer" target="_blank">Shift-Left Testing</a> emphasizes early testing in the development lifecycle:</p>

<h3 id="core-principles"><strong>Core Principles:</strong></h3>

<ol>
  <li>
<strong>Test Early</strong>: Begin testing during requirements and design phases</li>
  <li>
<strong>Test Often</strong>: Integrate testing into continuous development workflow</li>
  <li>
<strong>Test Fast</strong>: Prioritize quick feedback through unit and integration tests</li>
  <li>
<strong>Test Smart</strong>: Use automated testing to catch issues before production</li>
</ol>

<h3 id="implementation-in-this-project"><strong>Implementation in This Project:</strong></h3>

<ul>
  <li>✅ <strong>Unit-first approach</strong>: Established comprehensive unit testing before E2E optimization</li>
  <li>✅ <strong>Continuous validation</strong>: Health checks and monitoring throughout test suites</li>
  <li>✅ <strong>Performance focus</strong>: Optimized test execution for rapid developer feedback</li>
  <li>✅ <strong>Quality gates</strong>: Pre-commit validation ensures quality before integration</li>
</ul>

<h4 id="key-references-1"><strong>Key References:</strong></h4>

<ul>
  <li>IBM Shift-Left Testing: <a href="https://www.ibm.com/topics/shift-left-testing" rel="external noopener noreferrer" target="_blank">Shift-left Testing Guide</a>
</li>
  <li>Microsoft DevOps Shift-Left: <a href="https://docs.microsoft.com/en-us/azure/devops/learn/devops-at-microsoft/shift-left-make-testing-fast-reliable" rel="external noopener noreferrer" target="_blank">Shift Left to Make Testing Fast and Reliable</a>
</li>
  <li>Atlassian Testing Strategy: <a href="https://www.atlassian.com/continuous-delivery/software-testing/shift-left-testing" rel="external noopener noreferrer" target="_blank">Shift Left Testing Guide</a>
</li>
</ul>

<h2 id="-test-driven-development-tdd-citations">🔄 Test-Driven Development (TDD) Citations</h2>

<p>While this project evolved organically, it demonstrates TDD principles in reverse:</p>

<h3 id="tdd-cycle-applied-retroactively"><strong>TDD Cycle Applied Retroactively:</strong></h3>

<ol>
  <li>
<strong>Red</strong>: Identified failing and slow tests</li>
  <li>
<strong>Green</strong>: Implemented fixes and optimizations</li>
  <li>
<strong>Refactor</strong>: Consolidated and improved test architecture</li>
</ol>

<h3 id="tdd-benefits-realized"><strong>TDD Benefits Realized:</strong></h3>

<ul>
  <li>
<strong>Better Design</strong>: Test consolidation led to cleaner test architecture</li>
  <li>
<strong>Confidence</strong>: Comprehensive test coverage enables safe refactoring</li>
  <li>
<strong>Documentation</strong>: Tests serve as living documentation of system behavior</li>
  <li>
<strong>Regression Prevention</strong>: Robust test suite catches regressions early</li>
</ul>

<h4 id="key-tdd-references"><strong>Key TDD References:</strong></h4>

<ul>
  <li>Kent Beck’s TDD: <a href="https://www.amazon.com/Test-Driven-Development-Kent-Beck/dp/0321146530" rel="external noopener noreferrer" target="_blank">Test-Driven Development: By Example</a>
</li>
  <li>Uncle Bob’s TDD Rules: <a href="https://blog.cleancoder.com/uncle-bob/2014/12/17/TheCyclesOfTDD.html" rel="external noopener noreferrer" target="_blank">The Cycles of TDD</a>
</li>
  <li>Martin Fowler on TDD: <a href="https://martinfowler.com/bliki/TestDrivenDevelopment.html" rel="external noopener noreferrer" target="_blank">Test Driven Development</a>
</li>
</ul>

<h2 id="-developer-experience-improvements">🚀 Developer Experience Improvements</h2>

<h3 id="before-optimization"><strong>Before Optimization:</strong></h3>

<ul>
  <li>⏳ <strong>Slow feedback</strong>: Unit tests took 175+ seconds</li>
  <li>📁 <strong>Test fragmentation</strong>: 10 E2E files difficult to navigate</li>
  <li>🐛 <strong>Flaky tests</strong>: Unreliable E2E execution</li>
  <li>🔍 <strong>Poor visibility</strong>: Limited test monitoring and health checks</li>
</ul>

<h3 id="after-optimization"><strong>After Optimization:</strong></h3>

<ul>
  <li>⚡ <strong>Instant feedback</strong>: Unit tests complete in 2.3 seconds (75x faster)</li>
  <li>📋 <strong>Logical organization</strong>: 4 consolidated E2E files with clear purposes</li>
  <li>🛡️ <strong>Reliable execution</strong>: Enhanced error handling and graceful degradation</li>
  <li>📊 <strong>Comprehensive monitoring</strong>: Health checks and URL validation throughout</li>
</ul>

<h3 id="impact-on-development-workflow"><strong>Impact on Development Workflow:</strong></h3>

<ol>
  <li>
<strong>Faster Iteration</strong>: Developers get near-instant feedback on changes</li>
  <li>
<strong>Easier Maintenance</strong>: Fewer files to manage and update</li>
  <li>
<strong>Better Debugging</strong>: Enhanced logging and monitoring capabilities</li>
  <li>
<strong>Increased Confidence</strong>: Reliable test execution builds trust in the test suite</li>
</ol>

<h2 id="-implementation-recommendations">📋 Implementation Recommendations</h2>

<h3 id="for-new-projects"><strong>For New Projects:</strong></h3>

<ol>
  <li>
<strong>Start with Unit Testing</strong>: Implement Jest with optimized configuration from day one</li>
  <li>
<strong>Follow the Pyramid</strong>: Establish 70-80% unit test coverage before adding E2E tests</li>
  <li>
<strong>Plan E2E Architecture</strong>: Design logical test groupings from the beginning</li>
  <li>
<strong>Implement Monitoring</strong>: Add health checks and validation utilities early</li>
</ol>

<h3 id="for-existing-projects"><strong>For Existing Projects:</strong></h3>

<ol>
  <li>
<strong>Audit Current Performance</strong>: Measure test execution times and identify bottlenecks</li>
  <li>
<strong>Optimize Unit Tests First</strong>: Focus on fast feedback before tackling E2E tests</li>
  <li>
<strong>Consolidate Strategically</strong>: Group related E2E tests by functional domain</li>
  <li>
<strong>Maintain Coverage</strong>: Ensure optimizations preserve test coverage</li>
</ol>

<h3 id="continuous-improvement"><strong>Continuous Improvement:</strong></h3>

<ol>
  <li>
<strong>Regular Performance Reviews</strong>: Schedule quarterly testing performance audits</li>
  <li>
<strong>Monitor Test Health</strong>: Track test execution times and success rates</li>
  <li>
<strong>Update Dependencies</strong>: Keep testing frameworks and tools up to date</li>
  <li>
<strong>Knowledge Sharing</strong>: Document learnings and share best practices with the team</li>
</ol>

<h2 id="-references">📚 References</h2>

<h3 id="testing-pyramid-references">Testing Pyramid References</h3>

<p>The Testing Pyramid is a fundamental testing strategy that emphasizes building a solid foundation of fast, reliable unit tests before adding more expensive integration and UI tests:</p>

<ul>
  <li>
<strong>Mike Cohn’s Original Concept</strong>: <a href="https://www.mountaingoatsoftware.com/agile/scrum/resources" rel="external noopener noreferrer" target="_blank">Succeeding with Agile: Software Development Using Scrum</a>
</li>
  <li>
<strong>Martin Fowler’s Analysis</strong>: <a href="https://martinfowler.com/bliki/TestPyramid.html" rel="external noopener noreferrer" target="_blank">TestPyramid</a>
</li>
  <li>
<strong>Google Testing Blog</strong>: <a href="https://testing.googleblog.com/2015/04/just-say-no-to-more-end-to-end-tests.html" rel="external noopener noreferrer" target="_blank">Just Say No to More End-to-End Tests</a>
</li>
  <li>
<strong>Kent C. Dodds</strong>: <a href="https://kentcdodds.com/blog/write-tests" rel="external noopener noreferrer" target="_blank">Write tests. Not too many. Mostly integration</a>
</li>
</ul>

<h3 id="shift-left-testing-references">Shift-Left Testing References</h3>

<p>Shift-Left Testing emphasizes moving testing activities earlier in the development lifecycle to catch issues sooner and reduce overall costs:</p>

<ul>
  <li>
<strong>IBM DevOps</strong>: <a href="https://www.ibm.com/cloud/blog/shift-left-testing" rel="external noopener noreferrer" target="_blank">Shift-left testing: What, why &amp; how to shift left</a>
</li>
  <li>
<strong>Microsoft DevOps</strong>: <a href="https://docs.microsoft.com/en-us/devops/develop/shift-left-make-testing-fast-reliable" rel="external noopener noreferrer" target="_blank">Shift left to make testing fast and reliable</a>
</li>
  <li>
<strong>Atlassian Guide</strong>: <a href="https://www.atlassian.com/continuous-delivery/software-testing/shift-left-testing" rel="external noopener noreferrer" target="_blank">Shift left testing guide</a>
</li>
  <li>
<strong>SmartBear</strong>: <a href="https://smartbear.com/learn/automated-testing/shift-left-testing/" rel="external noopener noreferrer" target="_blank">What is Shift Left Testing?</a>
</li>
</ul>

<h2 id="-conclusion">🎯 Conclusion</h2>

<p>This session demonstrates the significant benefits achievable through strategic testing evolution. By applying the Testing Pyramid principles, implementing Shift-Left testing practices, and learning from TDD methodologies, we achieved:</p>

<ul>
  <li>
<strong>75x improvement</strong> in unit test performance</li>
  <li>
<strong>60% reduction</strong> in E2E test complexity</li>
  <li>
<strong>35-40% faster</strong> E2E execution</li>
  <li>
<strong>100% preservation</strong> of test coverage</li>
  <li>
<strong>Dramatically improved</strong> developer experience</li>
</ul>

<p>The key insight is that testing optimization yields compound benefits: faster feedback enables more frequent testing, which improves code quality, which reduces debugging time, which increases development velocity. This creates a positive feedback loop that significantly enhances the overall development experience.</p>

<p>The organic evolution approach, while requiring eventual optimization effort, provided valuable learning opportunities and context-specific solutions that might not have been discovered through a purely academic approach to testing implementation.</p>

<hr>

<p><em>Document created: August 22, 2025</em><br>
<em>Performance data based on MIJUG .NET workspace optimization session</em><br>
<em>Testing frameworks: Jest 29.7+, Playwright 1.47+, @axe-core/playwright</em></p>
</div>
</article>
</div>
      <div class="ad-container" id="ad-slot-1" data-ad-slot="12345678"></div>
    </main>

    <footer class="site-footer h-card">
      <data class="u-url" href="/"></data>
      <div class="wrapper">
        <div class="footer-col-wrapper">
          <div class="footer-col footer-col-1">
            <a href="/terms-of-service.html">Terms of Service</a><br>
            <a href="/privacy-policy.html">Privacy Policy</a>
          </div>
          <div class="footer-col footer-col-2">
            <a href="/contact/">Contact Us</a>
          </div>
          <div class="footer-col footer-col-3">
            <p>
              © 2025
              <a rel="external nofollow" href="https://share.google/8Ir6br641K4uU74l2">Kranson Enterprises</a><br>
                  subscribe
              <a href="/feed.xml">via RSS<svg class="svg-icon">
                  <use xlink:href="/assets/minima-social-icons.svg#rss"></use></svg></a>
            </p>
          </div>
        </div>
      </div>
    </footer>

    

    <script>
      // Detect nomodule support
      (function() {
        var supportsModules = 'noModule' in HTMLScriptElement.prototype;
        if (!supportsModules) {
          document.write('<div class="legacy-browser-notice" role="alert"><strong>No Commerce Available</strong><span class="notice-detail">Your browser does not support modern features required for commerce functionality.</span></div>');
        }
      })();
    </script>

    <!-- ES6/ES5 module loading -->
    <script type="module" src="/assets/js/mijug-es6.min.js"></script>
    <script nomodule src="/assets/js/mijug-es5.min.js"></script>

    <script>
      (function() {
        'use strict';

        var html = document.documentElement;
        html.className = html.className.replace("no-js", "js");

        var toggleBtn = document.querySelector('.nav-toggle');
        var nav = document.getElementById('primary-navigation');
        var statusEl = document.getElementById('menu-status');
        var body = document.body;

        if (!toggleBtn || !nav || !statusEl) {
          console.warn('Navigation elements not found - falling back to no-JS behavior');
          return;
        }

        nav.classList.add('nav-overlay');

        function toggleNavigation() {
          var isExpanded = toggleBtn.getAttribute('aria-expanded') === 'true';

          if (isExpanded) {
            nav.classList.remove('nav-visible');
            toggleBtn.setAttribute('aria-expanded', 'false');
            nav.setAttribute('aria-hidden', 'true');
            toggleBtn.textContent = 'Menu';
            statusEl.textContent = 'Menu closed';
            body.classList.remove('nav-open');
          } else {
            nav.classList.add('nav-visible');
            toggleBtn.setAttribute('aria-expanded', 'true');
            nav.removeAttribute('aria-hidden');
            toggleBtn.textContent = 'Close';
            statusEl.textContent = 'Menu opened';
            body.classList.add('nav-open');
          }
        }

        toggleBtn.addEventListener('click', function(e) {
          e.preventDefault();
          toggleNavigation();
        });

        document.addEventListener('click', function(e) {
          if (toggleBtn.getAttribute('aria-expanded') !== 'true') return;

          if ((!nav.contains(e.target) && !toggleBtn.contains(e.target)) ||
              (e.target.tagName === 'A' && nav.contains(e.target))) {
            toggleNavigation();
          }
        });

        document.addEventListener('keydown', function(e) {
          if (e.key === 'Escape' && toggleBtn.getAttribute('aria-expanded') === 'true') {
            toggleNavigation();
            toggleBtn.focus();
          }
        });

        nav.setAttribute('aria-hidden', 'true');
      })();
    </script>

    
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }

      gtag('consent', 'default', {
        analytics_storage: 'denied',
        ad_storage: 'denied',
        ad_user_data: 'denied',
        ad_personalization: 'denied',
      });

      gtag('js', new Date());
      gtag('config', 'G-W1M1N0DCD4');
    </script>

    <script src="https://www.googletagmanager.com/gtag/js?id=G-W1M1N0DCD4" crossorigin="anonymous" async></script>
    

    <!-- Cookie consent system -->
    <!-- Google AdSense with MIJUG Cookie Consent Integration -->
<script>
  (function() {
    'use strict';

    // Privacy and consent checks
    if (window.doNotTrack === '1' ||
        navigator.doNotTrack === '1' ||
        navigator.doNotTrack === 'yes' ||
        navigator.msDoNotTrack === '1' ||
        localStorage.getItem('mijug-ads-disabled') === 'true') {
      return;
    }

    // Development environment bypass
    if (location.hostname === 'localhost' ||
        location.hostname === '127.0.0.1' ||
        location.protocol === 'file:') {
      console.log('[MIJUG AdSense] Skipped - Development environment');
      return;
    }

    // URL parameter bypass for testing
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get('skip-ads') === 'true') {
      console.log('[MIJUG AdSense] Skipped - URL parameter override');
      return;
    }

    // Initialize consent mode with MIJUG defaults
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    window.gtag = gtag;

    // Set default consent state (MIJUG privacy-first approach)
    gtag('consent', 'default', {
      ad_storage: 'denied',
      ad_user_data: 'denied',
      ad_personalization: 'denied',
      analytics_storage: 'denied'
    });

    // Load AdSense with error handling
    function loadAdSense() {
      try {
        const script = document.createElement('script');
        script.async = true;
        script.crossOrigin = 'anonymous';
        script.src = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=';
        script.onerror = function() {
          console.warn('[MIJUG AdSense] Failed to load AdSense script');
        };
        document.head.appendChild(script);

        console.log('[MIJUG AdSense] AdSense script loaded');

      } catch (error) {
        console.warn('[MIJUG AdSense] Initialization error:', error);
      }
    }

    // MIJUG cookie consent integration
    if (typeof window.MijugCookieConsent !== 'undefined') {
      window.MijugCookieConsent.onReady(function(consent) {
        if (consent.advertising) {
          // Update consent for AdSense
          gtag('consent', 'update', {
            ad_storage: 'granted',
            ad_user_data: 'granted',
            ad_personalization: consent.personalization ? 'granted' : 'denied'
          });

          loadAdSense();
        } else {
          console.log('[MIJUG AdSense] Skipped - Advertising cookies declined');
        }
      });

      // Handle consent changes
      window.MijugCookieConsent.onConsentChange(function(consent) {
        gtag('consent', 'update', {
          ad_storage: consent.advertising ? 'granted' : 'denied',
          ad_user_data: consent.advertising ? 'granted' : 'denied',
          ad_personalization: (consent.advertising && consent.personalization) ? 'granted' : 'denied'
        });
      });
    } else {
      // Fallback: Load with denied consent if no cookie system
      console.log('[MIJUG AdSense] Loading with default denied consent - no cookie system detected');
      loadAdSense();
    }

  })();
</script>

    <!-- Cookie Consent Banner for GDPR Compliance -->
<div id="cookie-consent-banner" class="cookie-consent-banner" role="complementary" aria-label="Cookie consent banner" aria-live="polite" style="display: none">
  <div class="cookie-consent-content">
    <div class="cookie-consent-text">
      <p>
        <strong>🍪 Cookie Notice</strong><br>
        This website uses cookies for Google AdSense and analytics to improve
        your experience.
        <a href="/privacy-policy.html" class="cookie-policy-link">Learn more in our Privacy Policy</a>
      </p>
    </div>
    <div class="cookie-consent-buttons">
      <button id="accept-cookies" class="cookie-btn cookie-btn-accept" onclick="acceptCookies()">
        Accept All Cookies
      </button>
      <button id="decline-cookies" class="cookie-btn cookie-btn-decline" onclick="declineCookies()">
        Decline Optional Cookies
      </button>
      <button id="cookie-settings" class="cookie-btn cookie-btn-settings" onclick="showCookieSettings()">
        Cookie Settings
      </button>
    </div>
  </div>
</div>

<!-- Cookie Settings Modal - Using MIJUG Theme Pattern -->
<div id="cookie-settings-modal" class="cookie-modal" style="display: none" role="dialog" aria-modal="true" aria-labelledby="cookie-settings-title">
  <div class="cookie-modal-content mijug-highlight">
    <div class="cookie-modal-header">
      <h3 id="cookie-settings-title">Cookie Settings</h3>
      <button class="cookie-modal-close" onclick="closeCookieSettings()" aria-label="Close cookie settings dialog" type="button">
        ×
      </button>
    </div>
    <div class="cookie-modal-body">
      <p class="cookie-modal-description">
        Customize your cookie preferences. Essential cookies are required for basic site functionality and cannot be disabled.
      </p>

      <div class="cookie-category">
        <div class="cookie-category-header">
          <h4>Essential Cookies</h4>
          <label class="cookie-toggle" for="essential-cookies" aria-label="Essential cookies (required)">
            <input type="checkbox" id="essential-cookies" checked disabled>
            <span class="cookie-slider cookie-slider-disabled"></span>
          </label>
        </div>
        <p class="cookie-category-description">Required for basic site functionality. These cannot be disabled.</p>
      </div>

      <div class="cookie-category">
        <div class="cookie-category-header">
          <h4>Analytics Cookies</h4>
          <label class="cookie-toggle" for="analytics-cookies" aria-label="Analytics cookies (optional)">
            <input type="checkbox" id="analytics-cookies">
            <span class="cookie-slider"></span>
          </label>
        </div>
        <p class="cookie-category-description">
          Help us understand how visitors interact with our website via Google Analytics.
          No personally identifiable information is collected.
        </p>
      </div>

      <div class="cookie-category">
        <div class="cookie-category-header">
          <h4>Advertising Cookies</h4>
          <label class="cookie-toggle" for="advertising-cookies" aria-label="Advertising cookies (optional)">
            <input type="checkbox" id="advertising-cookies">
            <span class="cookie-slider"></span>
          </label>
        </div>
        <p class="cookie-category-description">
          Used by Google AdSense to display relevant advertisements.
          Helps support the website through ad revenue.
        </p>
      </div>
    </div>
    <div class="cookie-modal-footer">
      <button class="cookie-btn cookie-btn-accept" onclick="savePreferences()" type="button">
        Save Preferences
      </button>
      <button class="cookie-btn cookie-btn-settings" onclick="closeCookieSettings()" type="button">
        Cancel
      </button>
    </div>
  </div>
</div>
<style>
  html body #cookie-consent-banner.cookie-consent-banner,
  html body div#cookie-consent-banner.cookie-consent-banner {
    position: fixed !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    background: #2c3e50 !important;
    color: white !important;
    padding: 1rem !important;
    box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.3) !important;
    z-index: 2147483647 !important;
    border-top: 3px solid #3498db !important;
    display: none !important;
    visibility: visible !important;
    opacity: 1 !important;
    width: 100% !important;
    min-height: 80px !important;
    box-sizing: border-box !important;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
    font-size: 14px !important;
    line-height: 1.4 !important;
    transform: translateZ(0) !important;
    will-change: transform !important;
  }

  /* Enhanced visibility for all child elements */
  html body #cookie-consent-banner.cookie-consent-banner *,
  html body div#cookie-consent-banner.cookie-consent-banner * {
    visibility: visible !important;
    opacity: inherit !important;
    display: initial !important;
  }

  /* Content layout with enhanced specificity */
  html body .cookie-consent-content {
    max-width: 1200px !important;
    margin: 0 auto !important;
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    gap: 1rem !important;
    flex-wrap: wrap !important;
  }

  html body .cookie-consent-text {
    flex: 1 !important;
    min-width: 200px !important;
  }

  html body .cookie-consent-text p {
    margin: 0 !important;
    font-size: 0.9rem !important;
    line-height: 1.4 !important;
    color: white !important;
  }

  html body .cookie-policy-link {
    color: #74c0fc !important;
    text-decoration: underline !important;
  }

  html body .cookie-policy-link:hover {
    color: #a3d5ff !important;
  }

  html body .cookie-consent-buttons {
    display: flex !important;
    gap: 0.5rem !important;
    flex-wrap: wrap !important;
    min-width: 200px !important;
  }

  html body .cookie-btn {
    padding: 0.5rem 1rem !important;
    border: none !important;
    border-radius: 4px !important;
    cursor: pointer !important;
    font-size: 0.85rem !important;
    font-weight: 500 !important;
    transition: all 0.2s ease !important;
    white-space: nowrap !important;
    min-width: 80px !important;
  }

  html body .cookie-btn-accept {
    background: #1e8449 !important;
    color: white !important;
  }

  html body .cookie-btn-accept:hover {
    background: #196f3d !important;
  }

  html body .cookie-btn-decline {
    background: #c0392b !important;
    color: white !important;
  }

  html body .cookie-btn-decline:hover {
    background: #a93226 !important;
  }

  html body .cookie-btn-settings {
    background: #5d6d7e !important;
    color: white !important;
  }

  html body .cookie-btn-settings:hover {
    background: #515a5a !important;
  }

  /* Modal with enhanced specificity - hidden by default */
  html body .cookie-modal {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    height: 100% !important;
    background: rgba(0, 0, 0, 0.7) !important;
    z-index: 2147483646 !important;
    display: none !important;
    align-items: center !important;
    justify-content: center !important;
    backdrop-filter: blur(2px) !important;
    -webkit-backdrop-filter: blur(2px) !important;
  }

  html body .cookie-modal-content {
    background: white !important;
    border-radius: 8px !important;
    padding: 2rem !important;
    max-width: 500px !important;
    width: 90% !important;
    max-height: 80vh !important;
    overflow-y: auto !important;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3) !important;
  }

  /* Responsive design with enhanced breakpoints */
  @media (max-width: 768px) {
    html body .cookie-consent-content {
      flex-direction: column !important;
      align-items: stretch !important;
      gap: 0.75rem !important;
    }

    html body .cookie-consent-buttons {
      justify-content: center !important;
      gap: 0.25rem !important;
    }

    html body .cookie-btn {
      flex: 1 !important;
      min-width: 0 !important;
      font-size: 0.8rem !important;
      padding: 0.4rem 0.8rem !important;
    }

    html body .cookie-modal-content {
      margin: 1rem !important;
      padding: 1.5rem !important;
    }
  }

  @media (max-width: 480px) {
    html body .cookie-consent-buttons {
      flex-direction: column !important;
    }

    html body .cookie-btn {
      width: 100% !important;
    }
  }

  /* Print media - hide banner */
  @media print {
    html body #cookie-consent-banner.cookie-consent-banner,
    html body .cookie-modal {
      display: none !important;
    }
  }

  /* High contrast mode support */
  @media (prefers-contrast: high) {
    html body #cookie-consent-banner.cookie-consent-banner {
      border: 2px solid white !important;
    }
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    html body .cookie-btn {
      transition: none !important;
    }
  }
</style>
<style>
  /**
   * Enhanced modal management with aggressive visibility enforcement
   * Following MIJUG .NET workspace performance and accessibility standards
   */
  const modalManager = {
    show() {
      const modal = getElement(CONFIG.MODAL_ELEMENT_ID);
      if (!modal) {
        console.error('❌ Cookie settings modal element not found');
        return;
      }

      // Load current preferences before showing
      this.loadCurrentPreferences();

      // Use z-index higher than site header but compatible with theme
      modal.style.cssText = `
        display: flex !important;
        visibility: visible !important;
        opacity: 1 !important;
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        width: 100% !important;
        height: 100% !important;
        background: rgba(0, 0, 0, 0.85) !important;
        z-index: 1002 !important;
        align-items: center !important;
        justify-content: center !important;
        padding: 1rem !important;
        box-sizing: border-box !important;
      `;

      modal.setAttribute('aria-hidden', 'false');
      modal.classList.add('cookie-modal-visible');

      // Set up focus management
      focusManager.trapFocus(modal);

      // Prevent body scroll when modal is open using existing MIJUG class
      document.body.classList.add('nav-open');

      console.log('✅ Cookie settings modal displayed');
    },

    hide() {
      const modal = getElement(CONFIG.MODAL_ELEMENT_ID);
      if (!modal) return;

      modal.style.display = 'none';
      modal.setAttribute('aria-hidden', 'true');
      modal.classList.remove('cookie-modal-visible');

      // Remove focus trap
      if (modal._removeFocusTrap) {
        modal._removeFocusTrap();
      }

      // Restore body scroll using existing MIJUG class
      document.body.classList.remove('nav-open');

      // Return focus to settings button
      const settingsButton = getElement('cookie-settings');
      if (settingsButton) {
        settingsButton.focus();
      }

      console.log('✅ Cookie settings modal hidden');
    },

    loadCurrentPreferences() {
      const preferences = cookieUtils.get(CONFIG.COOKIE_PREFERENCES_KEY);

      let analytics = false;
      let advertising = false;

      if (preferences) {
        try {
          const prefs = JSON.parse(preferences);
          analytics = prefs.analytics || false;
          advertising = prefs.advertising || false;
        } catch (e) {
          console.warn('⚠️ Error parsing saved preferences:', e);
        }
      }

      // Update checkboxes with retry mechanism
      setTimeout(() => {
        const analyticsCheckbox = getElement('analytics-cookies');
        const advertisingCheckbox = getElement('advertising-cookies');

        if (analyticsCheckbox) {
          analyticsCheckbox.checked = analytics;
        }
        if (advertisingCheckbox) {
          advertisingCheckbox.checked = advertising;
        }

        console.log('📋 Current preferences loaded:', { analytics, advertising });
      }, 100);
    }
  };
</style>
<script>
  /**
   * Cookie Consent Management System
   * Streamlined implementation using MIJUG theme styles
   * Following MIJUG .NET Workspace coding standards
   */
  (function () {
    'use strict';

    // Configuration constants following MIJUG naming conventions
    const CONFIG = {
      COOKIE_CONSENT_KEY: 'mijug-cookie-consent',
      COOKIE_PREFERENCES_KEY: 'mijug-cookie-preferences',
      CONSENT_EXPIRY_DAYS: 365,
      FOCUS_TRAP_SELECTORS: 'button, [href], input:not([type=hidden]), select, textarea, [tabindex]:not([tabindex="-1"])',
      BANNER_ELEMENT_ID: 'cookie-consent-banner',
      MODAL_ELEMENT_ID: 'cookie-settings-modal'
    };

    // Performance-optimized element caching
    const elementCache = new Map();

    /**
     * Performance-optimized DOM element retrieval with caching
     * @param {string} id - Element ID
     * @returns {HTMLElement|null} - Cached or fresh DOM element
     */
    function getElement(id) {
      if (!elementCache.has(id)) {
        elementCache.set(id, document.getElementById(id));
      }
      return elementCache.get(id);
    }

    /**
     * Modern cookie utilities with enhanced error handling
     */
    const cookieUtils = {
      get(name) {
        try {
          const cookies = document.cookie.split(';');
          for (const cookie of cookies) {
            const [key, value] = cookie.trim().split('=');
            if (key === name) {
              return decodeURIComponent(value);
            }
          }
          return null;
        } catch (error) {
          console.warn(`⚠️ Error reading cookie ${name}:`, error);
          return null;
        }
      },

      set(name, value, days) {
        try {
          const expires = new Date(Date.now() + days * 24 * 60 * 60 * 1000).toUTCString();
          const cookieString = `${name}=${encodeURIComponent(value)};expires=${expires};path=/;SameSite=Strict`;
          document.cookie = cookieString;
          console.log(`🍪 Cookie set: ${name}=${value}`);
        } catch (error) {
          console.error(`❌ Error setting cookie ${name}:`, error);
        }
      },

      clear(name) {
        try {
          const clearCookieVariations = [
            `${name}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`,
            `${name}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain=${window.location.hostname};`,
            `${name}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain=.${window.location.hostname};`
          ];

          clearCookieVariations.forEach(cookieString => {
            document.cookie = cookieString;
          });

          console.log(`🗑️ Cookie cleared: ${name}`);
        } catch (error) {
          console.warn(`⚠️ Error clearing cookie ${name}:`, error);
        }
      }
    };

    /**
     * Enhanced banner visibility management using existing theme z-index patterns
     */
    const bannerManager = {
      show() {
        const banner = getElement(CONFIG.BANNER_ELEMENT_ID);
        const modal = getElement(CONFIG.MODAL_ELEMENT_ID);

        if (!banner) {
          console.error('❌ Cookie consent banner element not found');
          return;
        }

        // Use z-index that works with existing MIJUG theme
        banner.style.cssText = `
          display: block !important;
          visibility: visible !important;
          opacity: 1 !important;
          position: fixed !important;
          bottom: 0 !important;
          left: 0 !important;
          right: 0 !important;
          z-index: 1001 !important;
          background: #2c3e50 !important;
          color: white !important;
          padding: 1rem !important;
          box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.3) !important;
          border-top: 3px solid #3498db !important;
          min-height: 80px !important;
          width: 100vw !important;
          box-sizing: border-box !important;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
        `;

        banner.setAttribute('aria-hidden', 'false');
        banner.classList.add('cookie-banner-visible');

        // Ensure modal stays hidden
        if (modal) {
          modal.style.display = 'none';
          modal.setAttribute('aria-hidden', 'true');
        }

        console.log('✅ Cookie consent banner displayed');
      },

      hide() {
        const banner = getElement(CONFIG.BANNER_ELEMENT_ID);
        if (banner) {
          banner.style.display = 'none';
          banner.setAttribute('aria-hidden', 'true');
          banner.classList.remove('cookie-banner-visible');
          console.log('✅ Cookie consent banner hidden');
        }
      }
    };

    /**
     * Enhanced modal management leveraging MIJUG theme patterns
     */
    const modalManager = {
      show() {
        const modal = getElement(CONFIG.MODAL_ELEMENT_ID);
        if (!modal) {
          console.error('❌ Cookie settings modal element not found');
          return;
        }

        // Load current preferences before showing
        this.loadCurrentPreferences();

        // Use z-index higher than site header but compatible with theme
        modal.style.cssText = `
          display: flex !important;
          visibility: visible !important;
          opacity: 1 !important;
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          width: 100% !important;
          height: 100% !important;
          background: rgba(0, 0, 0, 0.85) !important;
          z-index: 1002 !important;
          align-items: center !important;
          justify-content: center !important;
          padding: 1rem !important;
          box-sizing: border-box !important;
        `;

        modal.setAttribute('aria-hidden', 'false');
        modal.classList.add('cookie-modal-visible');

        // Set up focus management
        focusManager.trapFocus(modal);

        // Prevent body scroll when modal is open using existing MIJUG class
        document.body.classList.add('nav-open');

        console.log('✅ Cookie settings modal displayed');
      },

      hide() {
        const modal = getElement(CONFIG.MODAL_ELEMENT_ID);
        if (!modal) return;

        modal.style.display = 'none';
        modal.setAttribute('aria-hidden', 'true');
        modal.classList.remove('cookie-modal-visible');

        // Remove focus trap
        if (modal._removeFocusTrap) {
          modal._removeFocusTrap();
        }

        // Restore body scroll using existing MIJUG class
        document.body.classList.remove('nav-open');

        // Return focus to settings button
        const settingsButton = getElement('cookie-settings');
        if (settingsButton) {
          settingsButton.focus();
        }

        console.log('✅ Cookie settings modal hidden');
      },

      loadCurrentPreferences() {
        const preferences = cookieUtils.get(CONFIG.COOKIE_PREFERENCES_KEY);

        let analytics = false;
        let advertising = false;

        if (preferences) {
          try {
            const prefs = JSON.parse(preferences);
            analytics = prefs.analytics || false;
            advertising = prefs.advertising || false;
          } catch (e) {
            console.warn('⚠️ Error parsing saved preferences:', e);
          }
        }

        // Update checkboxes with retry mechanism
        setTimeout(() => {
          const analyticsCheckbox = getElement('analytics-cookies');
          const advertisingCheckbox = getElement('advertising-cookies');

          if (analyticsCheckbox) {
            analyticsCheckbox.checked = analytics;
          }
          if (advertisingCheckbox) {
            advertisingCheckbox.checked = advertising;
          }

          console.log('📋 Current preferences loaded:', { analytics, advertising });
        }, 100);
      }
    };

    /**
     * Consent state management with enhanced logic
     */
    const consentManager = {
      shouldShowConsent() {
        try {
          // Testing override - highest priority
          if (window.forceShowCookieConsent === true) {
            console.log('🧪 Testing override: Forcing cookie consent display');
            return true;
          }

          // URL parameter override
          const urlParams = new URLSearchParams(window.location.search);
          if (urlParams.get('force-cookie-consent') === 'true') {
            console.log('🧪 URL parameter override: Forcing cookie consent display');
            return true;
          }

          // Development mode detection
          const isDevelopment = window.location.hostname === 'localhost' ||
                               window.location.hostname === '127.0.0.1' ||
                               window.location.hostname.endsWith('.local');

          if (isDevelopment) {
            console.log('🔧 Development mode detected - showing cookie consent');
            return true;
          }

          // Check existing consent
          const consentCookie = cookieUtils.get(CONFIG.COOKIE_CONSENT_KEY);
          if (consentCookie !== null && consentCookie !== '') {
            console.log('✅ Existing consent found:', consentCookie);
            return false;
          }

          console.log('📋 No existing consent - showing banner for GDPR compliance');
          return true;
        } catch (error) {
          console.warn('⚠️ Error checking consent status:', error);
          return true;
        }
      },

      hasConsent() {
        return cookieUtils.get(CONFIG.COOKIE_CONSENT_KEY) !== null;
      },

      hasAnalyticsConsent() {
        const preferences = cookieUtils.get(CONFIG.COOKIE_PREFERENCES_KEY);
        if (!preferences) return false;
        try {
          return JSON.parse(preferences).analytics === true;
        } catch {
          return false;
        }
      },

      hasAdvertisingConsent() {
        const preferences = cookieUtils.get(CONFIG.COOKIE_PREFERENCES_KEY);
        if (!preferences) return false;
        try {
          return JSON.parse(preferences).advertising === true;
        } catch {
          return false;
        }
      }
    };

    /**
     * Analytics integration with localhost safety
     */
    const analyticsManager = {
      loadAnalytics() {
        if (consentManager.hasAnalyticsConsent() && typeof gtag !== 'undefined') {
          gtag('consent', 'update', { analytics_storage: 'granted' });
          console.log('📊 Analytics loaded with user consent');
        } else {
          console.log('📊 Analytics not loaded (no consent or localhost)');
        }
      },

      loadAdSense() {
        if (consentManager.hasAdvertisingConsent() && typeof gtag !== 'undefined') {
          gtag('consent', 'update', {
            ad_storage: 'granted',
            ad_user_data: 'granted',
            ad_personalization: 'granted',
          });
          console.log('📢 AdSense loaded with user consent');
        } else {
          console.log('📢 AdSense not loaded (no consent or localhost)');
        }
      }
    };

    /**
     * Focus management for accessibility compliance
     */
    const focusManager = {
      trapFocus(modal) {
        const focusableEls = modal.querySelectorAll(CONFIG.FOCUS_TRAP_SELECTORS);
        const firstFocusableEl = focusableEls[0];
        const lastFocusableEl = focusableEls[focusableEls.length - 1];

        const handleKeydown = (e) => {
          if (e.key === 'Tab') {
            if (e.shiftKey && document.activeElement === firstFocusableEl) {
              e.preventDefault();
              lastFocusableEl?.focus();
            } else if (!e.shiftKey && document.activeElement === lastFocusableEl) {
              e.preventDefault();
              firstFocusableEl?.focus();
            }
          } else if (e.key === 'Escape') {
            closeCookieSettings();
          }
        };

        modal.addEventListener('keydown', handleKeydown);
        modal._removeFocusTrap = () => modal.removeEventListener('keydown', handleKeydown);

        // Focus close button first for better UX
        requestAnimationFrame(() => {
          const closeButton = modal.querySelector('.cookie-modal-close');
          if (closeButton) {
            closeButton.focus();
          } else {
            firstFocusableEl?.focus();
          }
        });
      }
    };

    /**
     * Global button handlers with enhanced error handling
     */
    window.acceptCookies = function () {
      try {
        const preferences = { analytics: true, advertising: true };
        cookieUtils.set(CONFIG.COOKIE_CONSENT_KEY, 'accepted', CONFIG.CONSENT_EXPIRY_DAYS);
        cookieUtils.set(CONFIG.COOKIE_PREFERENCES_KEY, JSON.stringify(preferences), CONFIG.CONSENT_EXPIRY_DAYS);

        bannerManager.hide();
        analyticsManager.loadAnalytics();
        analyticsManager.loadAdSense();
        console.log('✅ All cookies accepted');
      } catch (error) {
        console.error('❌ Error accepting cookies:', error);
      }
    };

    window.declineCookies = function () {
      try {
        const preferences = { analytics: false, advertising: false };
        cookieUtils.set(CONFIG.COOKIE_CONSENT_KEY, 'declined', CONFIG.CONSENT_EXPIRY_DAYS);
        cookieUtils.set(CONFIG.COOKIE_PREFERENCES_KEY, JSON.stringify(preferences), CONFIG.CONSENT_EXPIRY_DAYS);

        bannerManager.hide();
        console.log('❌ Optional cookies declined');
      } catch (error) {
        console.error('❌ Error declining cookies:', error);
      }
    };

    window.showCookieSettings = function () {
      try {
        console.log('🔧 Attempting to show cookie settings modal...');
        modalManager.show();
      } catch (error) {
        console.error('❌ Error showing cookie settings:', error);
      }
    };

    window.closeCookieSettings = function () {
      try {
        modalManager.hide();
      } catch (error) {
        console.error('❌ Error closing cookie settings:', error);
      }
    };

    window.savePreferences = function () {
      try {
        const analyticsCheckbox = getElement('analytics-cookies');
        const advertisingCheckbox = getElement('advertising-cookies');

        const analytics = analyticsCheckbox?.checked || false;
        const advertising = advertisingCheckbox?.checked || false;
        const preferences = { analytics, advertising };

        cookieUtils.set(CONFIG.COOKIE_CONSENT_KEY, 'customized', CONFIG.CONSENT_EXPIRY_DAYS);
        cookieUtils.set(CONFIG.COOKIE_PREFERENCES_KEY, JSON.stringify(preferences), CONFIG.CONSENT_EXPIRY_DAYS);

        bannerManager.hide();
        modalManager.hide();

        if (analytics) analyticsManager.loadAnalytics();
        if (advertising) analyticsManager.loadAdSense();

        console.log('💾 Custom preferences saved:', preferences);
        showSaveConfirmation();
      } catch (error) {
        console.error('❌ Error saving preferences:', error);
      }
    };

    /**
     * Save confirmation using MIJUG theme patterns
     */
    function showSaveConfirmation() {
      const notification = document.createElement('div');
      notification.className = 'mijug-highlight favorite-toast favorite-toast-success favorite-toast-visible';
      notification.style.cssText = `
        position: fixed !important;
        top: 20px !important;
        right: 20px !important;
        z-index: 1003 !important;
        max-width: 300px !important;
        padding: 1rem 1.5rem !important;
        border-radius: 8px !important;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
        animation: slideInRight 0.3s ease-out !important;
      `;

      notification.innerHTML = `
        <div style="display: flex; align-items: center; gap: 0.5rem;">
          <span style="font-size: 1.2rem;">✅</span>
          <span>Cookie preferences saved successfully!</span>
        </div>
      `;

      notification.setAttribute('role', 'alert');
      notification.setAttribute('aria-live', 'polite');

      document.body.appendChild(notification);

      setTimeout(() => {
        if (notification.parentNode) {
          notification.parentNode.removeChild(notification);
        }
      }, 4000);
    }

    /**
     * Enhanced initialization with multiple retry strategies
     */
    function initialize() {
      console.log('🚀 Cookie consent system initializing...');

      // Ensure modal is hidden on initialization
      const modal = getElement(CONFIG.MODAL_ELEMENT_ID);
      if (modal) {
        modal.style.display = 'none';
        modal.setAttribute('aria-hidden', 'true');
      }

      if (consentManager.shouldShowConsent()) {
        bannerManager.show();

        // Retry mechanisms for theme compatibility
        setTimeout(() => bannerManager.show(), 100);
        setTimeout(() => bannerManager.show(), 500);
      } else if (consentManager.hasConsent()) {
        analyticsManager.loadAnalytics();
        analyticsManager.loadAdSense();
      }
    }

    /**
     * Testing mode with enhanced visibility enforcement
     */
    function initializeTestingMode() {
      console.log('🧪 TESTING MODE: Enhanced cookie consent forcing');

      // Clear existing cookies
      const cookiesToClear = [CONFIG.COOKIE_CONSENT_KEY, CONFIG.COOKIE_PREFERENCES_KEY];
      cookiesToClear.forEach(cookieName => cookieUtils.clear(cookieName));

      // Set testing flags
      window.forceShowCookieConsent = true;

      setTimeout(() => {
        bannerManager.show();
        console.log('🧪 Testing banner display forced');
      }, 50);

      // Disable testing mode after timeout
      setTimeout(() => {
        window.forceShowCookieConsent = false;
        console.log('🧪 Testing mode disabled');
      }, 30000);
    }

    // Event listeners
    document.addEventListener('DOMContentLoaded', () => {
      try {
        initialize();

        if (window.location.search.includes('force-cookie-consent=true') ||
            window.location.hostname === 'localhost') {
          initializeTestingMode();
        }
      } catch (error) {
        console.error('❌ Error during cookie consent initialization:', error);
      }
    });

    // Modal click-outside handler
    document.addEventListener('click', (event) => {
      const modal = getElement(CONFIG.MODAL_ELEMENT_ID);
      if (modal && event.target === modal) {
        closeCookieSettings();
      }
    });

  })();
</script>


  </body>
</html>
